{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/braintreeUtils.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/loaderHelper.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/helper.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/paypal/paypalHelper.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/braintreeCreditCard.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/braintreePaypal.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/creditcard/creditcardHelper.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/creditcard/creditcardFields.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/braintreeVenmo.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/int_braintree.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/braintreeMFRA.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/applepay/applepayHelper.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/braintreeApplepay.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/creditcard/creditcardPayment.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/creditcard/creditcardAccount.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/paypal/minicartHelper.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/paypal/paypalAccount.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/paypal/paypalPayment.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/venmo/venmoAccount.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/venmo/venmoPayment.js","webpack:///./cartridges/int_braintree_sfra/cartridge/client/default/js/braintree/venmo/venmoHelper.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","console","consoleLog","log","consoleError","error","apply","arguments","bu","pdpOnlickForAsignedPaypalPayment","$bundleItem","$","pid","data","$productContainer","closest","form","quantity","val","length","items","map","this","find","text","parseInt","childProducts","JSON","stringify","toArray","options","$elOption","urlValue","selectedValueId","optionId","getOptions","response","ajax","url","method","async","responseJSON","getSelectedData","selectEl","getElementsByTagName","option","selected","attributes","postData","uri","document","createElement","setAttribute","style","display","hf","appendChild","body","submit","messages","errorInstances","createErrorInstance","containerElement","callback","Constructor","cb","push","containerEl","show","code","message","innerHTML","hide","clientToken","$continueButton","querySelector","continueButtonToggle","flag","stage","window","location","hash","substring","initWathcherCartUpdate","$grantTotal","currentGrantTotalValue","textContent","on","newGrantTotalValue","updateCartTotals","createEvent","initEvent","addEventListener","dispatchEvent","paymentMethodChangeHandle","currentTab","querySelectorAll","forEach","el","$tabContent","getAttribute","tab","removeAttribute","parse","updateCheckoutView","e","$paymentSummary","htmlToAppend","order","billing","payment","selectedPaymentInstruments","creditCardNumber","type","amount","braintreeUtils","require","showFormErrorMsg","preventDefault","setCustomValidity","validity","valid","validationMessage","classList","add","contains","input","clearFormErrors","remove","submitAddressFrom","$addressForm","stopImmediatePropagation","spinner","start","$braintreePDPButton","res","stop","attr","dataType","serialize","success","href","redirectUrl","err","formValidationConrol","validateActions","enable","appendShippingAddressModal","modal","initAccountListAndSaveFunctionality","$accountsList","$savePaypalAccountCountainerEl","$savePaypalAccountEl","$paypalAccounMakeDefaultEl","accountsListChange","checked","disabled","selectedAccount","createShippingAddressData","inpShippingAddress","details","shippingAddress","recipientName","firstName","lastName","email","phone","countryCodeAlpha2","countryCode","streetAddress","line1","extendedAddress","line2","locality","city","region","state","postalCode","createBillingAddressData","inpBillingAddress","billingAddress","appendToUrl","param","newUrl","indexOf","keys","encodeURIComponent","join","showPayPalAccount","braintreePaypalEmail","braintreePaypalNonce","braintreePaypalAccount","getElementById","paypalAccount","$paypalContent","dataset","customerAuthenticated","loader","params","loaderInstance","creditcardHelper","er","isFormValid","$cardOwnerEl","parentNode","validation","check3dSecureAndSubmit","startTokenizeCb","nonce","errorCode","is3dSecureEnabled","billingData","split","reduce","accumulator","item","elem","lastIndexOf","braintree","threeDSecure","authorization","version","btError","verifyCard","bin","givenName","surname","phoneNumber","address1","address2","stateCode","country","additionalInformation","shippingAdditionalInfo","onLookupComplete","next","liabilityShifted","isSkip3dSecureLiabilityResult","result","secure3DFailed","init","initParams","initFields","$container","creditcardErrorContainer","extend","cardOwnerEvents","hostedFieldsStyles","color","hostedFieldsConfig","number","selector","cvv","expirationDate","hostedFieldsAdvancedOptions","isFraudToolsEnabled","dataCollector","kount","paypal","deviceData","hostedFields","styles","fields","hostedFieldsInstance","continueButton","startTokenize","tokenize","convertCardTypeToDwFormat","cardType","lastFour","getHostedFieldInstance","updateData","uuid","removeFromCartUrl","paypalHelper","$miniCartQuantity","$addToCartButton","$btn","$errorContainer","className","$loaderContainter","$braintreePaypalRiskDataInput","$loaderContainer","insertBefore","nextSibling","that","riskData","client","clientInstance","paypalCheckout","paypalCheckoutInstance","hidePDPButton","showPDPButton","paypalButtonConfig","env","getConfiguration","gatewayConfiguration","environment","Button","props","timeout","cart","Error","pliUUID","actionUrls","removeProductLineItemUrl","parseFloat","totals","grandTotal","replace","createPayment","locale","commit","layout","size","shape","funding","allowed","FUNDING","CARD","CREDIT","VENMO","disallowed","onAuthorize","actions","Promise","resolve","reject","tokenizePayment","then","payload","onTokenizePayment","catch","onCancel","a","b","urlParams","onError","paypalConfig","bmConfigurationInvalid","render","updateAmount","updateShippingAddress","shippingAddressOverride","$creditCardList","$creditCardMakeDefault","$saveCreditCard","$cardOwner","cardOwnerUpdateClasses","cardListChange","changeCardOwnerInput","$cardOwnerPh","$cardNumbeber","$cardNumbeberPh","$cardCvv","$cardCvvPh","$cardExpiration","$cardExpirationPh","$braintreeSaveCardContainer","$creditCardFieldsContainer","$braintree3DSecureContainer","$saveCardAndDefaultContainer","Event","selectedCard","errorIns","errorData","invalidFieldKeys","braintreeType","initCardListAndSaveFunctionality","creditCard","getShippingAdditionalInfo","orderAddress","workPhoneNumber","shippingGivenName","slice","shippingSurname","shippingPhone","initCreditCardFields","config","reload","$braintreeVenmoRiskDataInput","createVenmo","clientErr","dataCollectorErr","dataCollectorInstance","venmo","allowNewBrowserTab","ignoreHistoryChanges","venmoErr","venmoInstance","isBrowserSupported","venmoAccountPage","onClick","processResultsDelay","tokenizeErr","handleVenmoSuccess","deviceNotSupportVenmo","ins","helper","applepayHelper","creditcardPayment","creditCardFields","creditCardAccount","minicartHelper","paypalPayment","$cartPage","$summaryDetails","$addCreditCardForm","$addPaypalAccountForm","$creditCardContent","$applepayContent","$braintreePaypalNonce","$minicartPopover","venmoAccount","venmoPayment","$addVenmoAccountForm","$venmoContent","NodeList","Array","CustomEvent","event","bubbles","cancelable","detail","undefined","evt","initCustomEvent","initAccountAddCreditCard","initAddPaypalAccount","initAddVenmoAccount","miniCartButton","changeUrlForMiniCartBtn","observer","observe","childList","initApplepayButton","makePaypalPayment","doNotAllowSubmitForm","setTimeout","hide3DSecureContainer","isTrusted","makeCreditCardPayment","applepayPayment","makeVenmoPayment","target","changeEvent","cardList","paypalList","click","applePay","$applePayButton","$applepayButtonsWrap","$applepayDataMethod","makeApplePayButtonDisabled","hideApplePayButton","showApplePayButton","isRequiredBillingContactFields","isRequiredShippingContactFields","applePayIns","startPayment","getOrderInfoUrl","braintreeApplePayBillingAddress","braintreeApplePayShippingAddress","braintreeApplePayNonce","customFields","braintreeApplePayCustomFields","returnUrl","applepayButton","appleUpdateAmountData","createApplePay","applePayInstance","createApplePaySession","paymentRequest","createPaymentRequest","total","label","displayName","requiredBillingContactFields","requiredShippingContactFields","session","ApplePaySession","onvalidatemerchant","performValidation","validationURL","eventError","merchantSession","abort","completeMerchantValidation","onpaymentauthorized","token","completePayment","STATUS_FAILURE","STATUS_SUCCESS","shippingContact","addressLines","administrativeArea","toUpperCase","familyName","emailAddress","billingContact","begin","canMakePaymentsWithActiveCard","merchantIdentifier","allowSubmitForm","hasPaypalNonce","$braintreePaypalAccountsList","$paypalButton","$formIndent","post","id","responce","stopPropagation","paypalAccountList","addCreditCardForm","payPal","billingAgreementFlow","billingAgreementFlowConfig","isShippingAddressExist","startBillingAgreementCheckoutUrl","maxbuttons","fundingicons","tagline","validate","disable","btnInstance","billingAddressData","braintreePaypalBillingAddress","shippingAddressData","braintreePaypalShippingAddress","flow","braintreeSavePaypalAccount","offerCredit","braintreeIsPaypalCredit","braintreePaypalCustomFields","paypalHandle","paypalIns","$hideModalBtn","$saveAddressBtn","MutationObserver","mutations","mutation","addedNodes","$minicart","oldUrl","$braintreePaypalEmail","$braintreePaypalBillingAddress","$savePayPalAccountBtn","$braintreeFormErrorContainer","hasChildNodes","$braintreePaypalBillingAddressInput","$braintreePaypalShippingAddressInput","$braintreePaypalNonceInput","isOverrideBillingAddress","isShippedAndAddressOverride","updateAmountAndShippingData","$paypalAddress","newPayPalAddress","braintreeVenmo","$btFormErrorContainer","$btVenmoLoader","$buttonSave","VENMO_BROWSER_NOT_SUPPORTED","username","$form","venmoHelper","$venmoButton","$btVermoAccountsList","$braintreeVenmoNonce","$braintreeVenmoUserId","$submitShippingBtn","$contactEmail","$hideVenmoButton","$billingForm","hideShowButtons","checkValidity","parentElement","firstElementChild","createLoaderContainter","history","correlationId","element","attributeName","checkoutStage","oldValue","showVenmoAccount","attributeOldValue","$saveVenmoAccountCountainerEl","$saveVenmoAccountEl","$venmoAccounMakeDefaultEl","$braintreeVenmoAccount","$venmoAccount","$target"],"mappings":"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","file":"int_braintree.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n","'use strict';\n\n/* global braintree $ */\n/* eslint no-console: 'off' */\n\nvar isDebugMode = true;\nif (console && isDebugMode) {\n    var consoleLog = console.log;\n    var consoleError = console.error;\n    console.log = function () {\n        consoleLog.apply(console, arguments);\n    };\n    console.error = function () {\n        consoleError.apply(console, arguments);\n    };\n} else {\n    console = { // eslint-disable-line no-global-assign\n        log: function () { },\n        error: function () { }\n    };\n}\n\nvar bu = {\n    pdpOnlickForAsignedPaypalPayment: function () {\n        var $bundleItem = $('.bundle-item');\n        function getOptions($productContainer) {\n            var options = $productContainer\n                .find('.product-option')\n                .map(function () {\n                    var $elOption = $(this).find('.options-select');\n                    var urlValue = $elOption.val();\n                    var selectedValueId = $elOption.find('option[value=\"' + urlValue + '\"]')\n                        .data('value-id');\n                    return {\n                        optionId: $(this).data('option-id'),\n                        selectedValueId: selectedValueId\n                    };\n                }).toArray();\n\n            return JSON.stringify(options);\n        }\n\n        var pid = $('.product-detail:not(\".bundle-item\")').data('pid');\n        var $btn = $('.braintree_pdp_button .js_braintree_paypal_cart_button');\n        var $productContainer = $btn.closest('.product-detail');\n\n        var form = {\n            pid: pid,\n            quantity: $('.quantity-select').val()\n        };\n\n        if (!$bundleItem.length) {\n            form.options = getOptions($productContainer);\n        } else {\n            var items = $bundleItem.map(function () {\n                return {\n                    pid: $(this).find('.product-id').text(),\n                    quantity: parseInt($(this).find('label.quantity').data('quantity'), 10)\n                };\n            });\n            form.childProducts = JSON.stringify(items.toArray());\n        }\n        var response = $.ajax({\n            url: $('.add-to-cart-url').val(),\n            method: 'POST',\n            async: false,\n            data: form\n        }).responseJSON;\n        response.pid = pid;\n        return response;\n    },\n\n    getSelectedData: function (selectEl) {\n        if (!selectEl) {\n            return null;\n        }\n        var options = selectEl.getElementsByTagName('option');\n        var option = null;\n        for (var i = 0; i < options.length; i++) {\n            option = options[i];\n            if (option.selected) {\n                break;\n            }\n        }\n        return option.attributes;\n    },\n\n    postData: function (uri, data) {\n        var form = document.createElement('form');\n        form.setAttribute('method', 'post');\n        form.setAttribute('action', uri);\n        form.style.display = 'none';\n\n        for (var key in data) { // eslint-disable-line no-restricted-syntax\n            if (Object.hasOwnProperty.call(data, key)) {\n                var hf = document.createElement('input');\n                hf.setAttribute('type', 'hidden');\n                hf.setAttribute('name', key);\n                hf.setAttribute('value', data[key]);\n                form.appendChild(hf);\n            }\n        }\n\n        document.body.appendChild(form);\n        form.submit();\n    },\n\n    messages: {},\n\n    errorInstances: [],\n    createErrorInstance: function (containerElement, callback) {\n        if (!containerElement) {\n            console.error('Braintree: No container for showing erros');\n        }\n        function Constructor(cb) {\n            bu.errorInstances.push(this);\n            this.containerEl = containerElement;\n            this.cb = typeof cb === 'function' ? cb : function () { };\n        }\n        Constructor.prototype.show = function (error) {\n            var text = '';\n            if (typeof error === 'string') {\n                text = error;\n            }\n            if (typeof error === 'object') {\n                var msg = bu.messages[error.code];\n                text = msg || error.message;\n                this.cb(this, error);\n                if (error.code === 'PAYPAL_POPUP_CLOSED') {\n                    return;\n                }\n            }\n            this.containerEl.style.display = '';\n            this.containerEl.innerHTML = text;\n        };\n        Constructor.prototype.hide = function () {\n            this.containerEl.innerHTML = '';\n        };\n        return new Constructor(callback);\n    },\n    clientToken: null\n};\n\nbu.console = console;\n\nmodule.exports = bu;\n\n","\nmodule.exports = function (containerElement) {\n    if (!containerElement) {\n        console.error('Braintree: No container for showing loaders');\n    }\n    function Constructor() {\n        this.containerEl = containerElement;\n    }\n    Constructor.prototype.show = function () {\n        this.containerEl.style.display = 'block';\n    };\n    Constructor.prototype.hide = function () {\n        this.containerEl.style.display = 'none';\n    };\n    return new Constructor();\n};\n","'use strict';\nvar $continueButton = document.querySelector('button.submit-payment');\n\nfunction initWathcherCartUpdate() {\n    var $grantTotal = document.querySelector('.grand-total');\n    if ($grantTotal) {\n        var currentGrantTotalValue = $grantTotal.textContent;\n        $('body').on('cart:update', function () {\n            var newGrantTotalValue = $grantTotal.textContent;\n            if (newGrantTotalValue !== '' && newGrantTotalValue !== currentGrantTotalValue) {\n                currentGrantTotalValue = newGrantTotalValue;\n                var updateCartTotals = document.createEvent('Event');\n                updateCartTotals.initEvent('updateCartTotals', true, true);\n                document.querySelector('body').addEventListener('updateCartTotals', function () {\n                    'braintree:updateCartTotals';\n                }, false);\n                document.querySelector('body').dispatchEvent(updateCartTotals);\n            }\n        });\n    }\n}\n\nfunction continueButtonToggle(flag) {\n    var stage = window.location.hash.substring(1);\n    if (stage !== 'placeOrder' && stage !== 'shipping' && stage !== null && stage !== '') {\n        if (flag) {\n            $continueButton.style.display = 'none';\n        } else {\n            $continueButton.style.display = '';\n        }\n    }\n}\n\n\nfunction paymentMethodChangeHandle(currentTab) {\n    document.querySelectorAll('.payment-options[role=tablist] a[data-toggle=\"tab\"]').forEach(function (el) {\n        var $tabContent = document.querySelector(el.getAttribute('href'));\n\n        if (el === currentTab) {\n            $tabContent.querySelectorAll('input, textarea, select').forEach(function (tab) {\n                tab.removeAttribute('disabled', 'disabled');\n            });\n            $tabContent.querySelectorAll('select.no-disable').forEach(function (tab) {\n                tab.setAttribute('disabled', 'disabled');\n            });\n            continueButtonToggle(JSON.parse($tabContent.getAttribute('data-paypal-is-hide-continue-button')));\n        } else {\n            $tabContent.querySelectorAll('input, textarea, select').forEach(function (tab) {\n                tab.setAttribute('disabled', 'disabled');\n            });\n        }\n    });\n}\n\nfunction updateCheckoutView(e, data) {\n    console.log('checkout:updateCheckoutView', data);\n\n    var $paymentSummary = document.querySelector('.summary-details .braintree-payment-details');\n    var htmlToAppend = '';\n    var order = data.order;\n\n    if (order.billing.payment && order.billing.payment.selectedPaymentInstruments\n        && order.billing.payment.selectedPaymentInstruments.length > 0) {\n        htmlToAppend += '<div>' + order.billing.payment.selectedPaymentInstruments[0].name + '</div>';\n        if (order.billing.payment.selectedPaymentInstruments[0].creditCardNumber) {\n            htmlToAppend += '<div>' + order.billing.payment.selectedPaymentInstruments[0].creditCardNumber + '</div>';\n        }\n        if (order.billing.payment.selectedPaymentInstruments[0].type) {\n            htmlToAppend += '<div>' + order.billing.payment.selectedPaymentInstruments[0].type + '</div>';\n        }\n        htmlToAppend += '<div>' + order.billing.payment.selectedPaymentInstruments[0].amount + '</div>';\n    }\n\n    if ($paymentSummary) {\n        $paymentSummary.innerHTML = htmlToAppend;\n    }\n}\n\nmodule.exports = {\n    initWathcherCartUpdate,\n    paymentMethodChangeHandle,\n    continueButtonToggle,\n    updateCheckoutView\n};\n","'use strict';\nvar braintreeUtils = require('../braintreeUtils');\n\nfunction clearFormErrors() {\n    document.querySelector('.address-form').querySelectorAll('.form-control.is-invalid').forEach(function (el) {\n        el.classList.remove('is-invalid');\n    });\n}\n\nfunction showFormErrorMsg(e) {\n    if (document.querySelector('.address-form')) {\n        document.querySelector('.address-form').querySelectorAll('.form-control').forEach(function (el) {\n            e.preventDefault();\n            el.setCustomValidity('');\n            if (!el.validity.valid) {\n                var validationMessage = el.validationMessage;\n                el.classList.add('is-invalid');\n                if (el.classList.contains('is-invalid')) {\n                    document.querySelectorAll('.invalid-feedback').forEach(function (input) {\n                        input.textContent = validationMessage;\n                    });\n                }\n            }\n        });\n    }\n}\n\nfunction submitAddressFrom(e) {\n    var $addressForm = $('form.address-form');\n    e.preventDefault();\n    e.stopImmediatePropagation();\n    $addressForm.spinner().start();\n    var $braintreePDPButton = document.querySelector('.braintree_pdp_button');\n    if ($braintreePDPButton && $braintreePDPButton.style.display === '') {\n        var res = braintreeUtils.pdpOnlickForAsignedPaypalPayment();\n        if (res.error) {\n            braintreeUtils.createErrorInstance($addressForm.find('#braintreeFormErrorContainer')).show(res.message);\n            $addressForm.spinner().stop();\n            return true;\n        }\n    }\n    // 19.2.1 unnecessary code ?\n    // $('form.address-form').trigger('address:submit', e);\n    $.ajax({\n        url: $addressForm.attr('action'),\n        type: 'post',\n        dataType: 'json',\n        data: $addressForm.serialize(),\n        success: function (data) {\n            $addressForm.spinner().stop();\n            location.href = data.redirectUrl;\n        },\n        error: function (err) {\n            if (err.responseJSON.redirectUrl) {\n                window.location.href = err.responseJSON.redirectUrl;\n            }\n            $addressForm.spinner().stop();\n        }\n    });\n    return false;\n}\n\nvar formValidationConrol = function (validateActions) {\n    var isFormValid = true;\n    if (isFormValid) {\n        validateActions.enable();\n    } else {\n        validateActions.disable();\n    }\n};\n\nfunction appendShippingAddressModal() {\n    document.querySelector('body').appendChild(document.querySelector('#paypalAddShippingAddressModal'));\n    document.querySelector('#paypalAddShippingAddressModal').querySelectorAll('#braintreeFormErrorContainer').innerHTML = null;\n    $('#paypalAddShippingAddressModal').modal();\n}\n\nfunction initAccountListAndSaveFunctionality() {\n    var $accountsList = document.querySelector('#braintreePaypalAccountsList');\n    var $savePaypalAccountCountainerEl = document.querySelector('#braintreeSavePaypalAccountContainer');\n    var $savePaypalAccountEl = document.querySelector('#braintreeSavePaypalAccount');\n    var $paypalAccounMakeDefaultEl = document.querySelector('#braintreePaypalAccountMakeDefault');\n\n    function accountsListChange() { // eslint-disable-line require-jsdoc\n        if ($accountsList.value === 'newaccount') {\n            if ($savePaypalAccountCountainerEl) {\n                $savePaypalAccountCountainerEl.style.display = '';\n                $savePaypalAccountEl.checked = true;\n                $savePaypalAccountEl.disabled = false;\n            }\n            if ($paypalAccounMakeDefaultEl) {\n                $paypalAccounMakeDefaultEl.disabled = false;\n            }\n        } else {\n            var selectedAccount = braintreeUtils.getSelectedData($accountsList);\n            if (selectedAccount && $paypalAccounMakeDefaultEl) {\n                if (selectedAccount['data-default'].value === 'true') {\n                    $paypalAccounMakeDefaultEl.disabled = true;\n                } else {\n                    $paypalAccounMakeDefaultEl.disabled = false;\n                }\n                $paypalAccounMakeDefaultEl.checked = true;\n            }\n            if ($savePaypalAccountCountainerEl) {\n                $savePaypalAccountEl.checked = false;\n                $savePaypalAccountCountainerEl.style.display = 'none';\n            }\n        }\n    }\n\n    if ($savePaypalAccountEl) {\n        $savePaypalAccountEl.addEventListener('change', function () {\n            if ($savePaypalAccountEl.checked) {\n                $paypalAccounMakeDefaultEl.disabled = false;\n                $paypalAccounMakeDefaultEl.checked = true;\n            } else {\n                $paypalAccounMakeDefaultEl.disabled = true;\n                $paypalAccounMakeDefaultEl.checked = false;\n            }\n        });\n    }\n    if ($accountsList) {\n        $accountsList.addEventListener('change', accountsListChange);\n        accountsListChange();\n    }\n}\n\nfunction createShippingAddressData(inpShippingAddress, details) {\n    var shippingAddress = inpShippingAddress;\n    if (!shippingAddress.recipientName) {\n        shippingAddress.firstName = details.firstName;\n        shippingAddress.lastName = details.lastName;\n        shippingAddress.recipientName = details.firstName + ' ' + details.lastName;\n    }\n    shippingAddress.email = details.email;\n    shippingAddress.phone = details.phone;\n    shippingAddress.countryCodeAlpha2 = shippingAddress.countryCode;\n    shippingAddress.streetAddress = shippingAddress.line1;\n    shippingAddress.extendedAddress = shippingAddress.line2;\n    shippingAddress.locality = shippingAddress.city;\n    shippingAddress.region = shippingAddress.state;\n    shippingAddress.postalCode = shippingAddress.postalCode;\n    return JSON.stringify(shippingAddress);\n}\n\nfunction createBillingAddressData(inpBillingAddress, details) {\n    var billingAddress = inpBillingAddress;\n    billingAddress.firstName = details.firstName;\n    billingAddress.lastName = details.lastName;\n    billingAddress.email = details.email;\n    billingAddress.phone = details.phone;\n    billingAddress.countryCodeAlpha2 = billingAddress.countryCode;\n    billingAddress.streetAddress = billingAddress.line1;\n    billingAddress.extendedAddress = billingAddress.line2;\n    billingAddress.locality = billingAddress.city;\n    billingAddress.region = billingAddress.state;\n    return JSON.stringify(billingAddress);\n}\n\nfunction appendToUrl(url, param) {\n    var newUrl = url;\n    newUrl += (newUrl.indexOf('?') !== -1 ? '&' : '?') + Object.keys(param).map(function (key) {\n        return key + '=' + encodeURIComponent(param[key]);\n    }).join('&');\n\n    return newUrl;\n}\n\nfunction showPayPalAccount(braintreePaypalEmail, braintreePaypalNonce) {\n    var braintreePaypalAccount = document.getElementById('braintreePaypalAccount');\n    var paypalAccount = document.querySelector('.form-group.js_braintree_used_paypal_account');\n    var $paypalContent = document.querySelector('.js_braintree_paypalContent');\n\n    var customerAuthenticated = JSON.parse(braintreePaypalAccount.dataset.customerAuthenticated);\n\n    if (customerAuthenticated || (braintreePaypalEmail && braintreePaypalAccount.options[0].text !== 'PayPal')) {\n        if (braintreePaypalNonce && document.getElementById('braintreePaypalAccountsList')) {\n            return true;\n        }\n\n        document.querySelectorAll('.js_braintree_paypalContent .custom-checkbox').forEach((el) => { el.style.display = 'none'; });\n    }\n\n    braintreePaypalAccount.options[0].text = braintreePaypalEmail;\n    // eslint-disable-next-line no-unused-expressions, no-mixed-operators\n    paypalAccount.classList.contains('used-paypal-account') || paypalAccount.classList.remove('used-paypal-account-hide') && paypalAccount.classList.add('used-paypal-account');\n    document.querySelector('.js_braintree_paypal_billing_button').style.display = 'none';\n    $paypalContent.setAttribute('data-paypal-is-hide-continue-button', false);\n}\n\nmodule.exports = {\n    showFormErrorMsg,\n    clearFormErrors,\n    submitAddressFrom,\n    formValidationConrol,\n    appendShippingAddressModal,\n    initAccountListAndSaveFunctionality,\n    createShippingAddressData,\n    createBillingAddressData,\n    appendToUrl,\n    showPayPalAccount\n};\n","/* eslint-disable block-scoped-var */\n'use strict';\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\nvar creditcardHelper = require('./creditcard/creditcardHelper');\n\n/* global braintreeUtils braintree $ */\n\nvar bu = braintreeUtils;\nvar er = null;\nvar loader;\nvar params;\n\nfunction createHostedFields() {\n    if (params.isFraudToolsEnabled) {\n        loader.show();\n        braintree.dataCollector.create({\n            authorization: bu.clientToken,\n            kount: true,\n            paypal: false\n        }, function (error, data) {\n            loader.hide();\n            if (error) {\n                return;\n            }\n            document.querySelector('#braintreeDeviceData').value = data.deviceData;\n        });\n    }\n    loader.show();\n\n    braintree.hostedFields.create({\n        authorization: bu.clientToken,\n        styles: params.hostedFieldsStyles,\n        fields: params.hostedFieldsConfig\n    }, function (error, hostedFieldsInstance) {\n        loader.hide();\n        if (error) {\n            er.show(error);\n            return;\n        }\n        params.hostedFieldsInstance = hostedFieldsInstance;\n        hostedFieldsInstance.on('validityChange', function () {\n            if (params.continueButton && JSON.parse(params.continueButton.getAttribute('data-is-allow-submit-form'))) {\n                params.continueButton.setAttribute('data-is-allow-submit-form', false);\n            }\n        });\n    });\n}\n\nfunction isFormValid() {\n    var $cardOwnerEl = document.querySelector('#braintreeCardOwner');\n    if ($cardOwnerEl.value.length === 0) {\n        $cardOwnerEl.parentNode.classList.add('braintree-hosted-fields-invalid');\n        er.show(params.messages.validation);\n        return false;\n    }\n    $cardOwnerEl.parentNode.classList.remove('braintree-hosted-fields-invalid');\n    er.hide();\n\n    return true;\n}\n\nfunction check3dSecureAndSubmit(response, startTokenizeCb) {\n    if (!response.nonce || response.nonce === 'null') {\n        document.querySelector('#braintreePaymentMethodNonce').value = 'null';\n        startTokenizeCb({\n            error: true,\n            errorCode: 'nonce_is_null'\n        });\n        return;\n    }\n    if (!params.is3dSecureEnabled) {\n        document.querySelector('#braintreePaymentMethodNonce').value = response.nonce;\n        startTokenizeCb({\n            error: false,\n            errorCode: 'ok'\n        });\n        return;\n    }\n\n    loader.show();\n\n    var billingData = $('#dwfrm_billing').serialize().split('&')\n        .map(function (el) {\n            return el.split('=');\n        })\n        .reduce(function (accumulator, item) {\n            var elem = item[0].lastIndexOf('_');\n            if (elem < 0) {\n                accumulator[item[0]] = item[1];\n            } else {\n                elem = item[0].substring(elem + 1);\n                accumulator[elem] = item[1];\n            }\n            return accumulator;\n        }, {});\n\n    braintree.threeDSecure.create({\n        authorization: bu.clientToken,\n        version: 2\n    }, function (error, threeDSecure) {\n        loader.hide();\n        if (error) {\n            er.show(error);\n            startTokenizeCb({\n                error: true,\n                errorCode: 'bt_3dsecure_create_error',\n                btError: error\n            });\n            return;\n        }\n        bu.threeDSecure = threeDSecure;\n        loader.show();\n        threeDSecure.verifyCard({\n            amount: params.data.amount,\n            nonce: response.nonce,\n            bin: response.details ? response.details.bin : '',\n            email: document.querySelector('#email').value,\n            billingAddress: {\n                givenName: billingData.firstName,\n                surname: billingData.lastName,\n                phoneNumber: billingData.phone,\n                streetAddress: billingData.address1,\n                extendedAddress: billingData.address2,\n                locality: billingData.city,\n                region: billingData.stateCode,\n                postalCode: billingData.postalCode,\n                countryCodeAlpha2: billingData.country\n            },\n            additionalInformation: params.data.shippingAdditionalInfo,\n            onLookupComplete: function (data, next) {\n                next();\n            }\n        }, function (err, data) {\n            loader.hide();\n            if (err) {\n                er.show(err);\n                startTokenizeCb({\n                    error: true,\n                    errorCode: 'bt_3dsecure_verify_error',\n                    btError: err\n                });\n                return;\n            }\n            if (data.liabilityShifted || params.isSkip3dSecureLiabilityResult) {\n                document.querySelector('#braintreeIs3dSecureRequired').value = 'true';\n                document.querySelector('#braintreePaymentMethodNonce').value = data.nonce;\n                startTokenizeCb({\n                    error: false,\n                    result: 'ok'\n                });\n                return;\n            }\n            er.show(params.messages.secure3DFailed);\n            startTokenizeCb({\n                error: true,\n                result: 'secure3DFailed'\n            });\n            return;\n        });\n    });\n}\n\nfunction startTokenize(cb, response) {\n    if (response && response.nonce) {\n        check3dSecureAndSubmit(response, cb);\n        return;\n    }\n    if (!isFormValid()) {\n        cb({\n            error: true,\n            errorCode: 'fields_not_valid'\n        });\n        return;\n    }\n    loader.show();\n    params.hostedFieldsInstance.tokenize(function (error, data) {\n        loader.hide();\n        if (error) {\n            er.show(error);\n            cb({\n                error: true,\n                errorCode: 'bt_tokenize_error',\n                btError: error\n            });\n            return;\n        }\n        if (data.type === 'CreditCard') {\n            document.querySelector('#braintreeCardType').value = creditcardHelper.convertCardTypeToDwFormat(data.details.cardType);\n            document.querySelector('#braintreeCardMaskNumber').value = '************' + data.details.lastFour;\n        }\n        check3dSecureAndSubmit(data, cb);\n    });\n}\n\nfunction init(initParams) {\n    params = initParams;\n    bu.clientToken = params.clientToken;\n}\n\nfunction initFields(initParams, $container) {\n    params = initParams;\n    params.$container = $container;\n\n    er = bu.createErrorInstance(document.querySelector('#braintreeCreditCardErrorContainer'), creditcardHelper.creditcardErrorContainer);\n    loader = loaderInstance(document.querySelector('#braintreeCreditCardLoader'));\n    bu.clientToken = params.clientToken;\n    $.extend(bu.messages, params.messages);\n\n    creditcardHelper.cardOwnerEvents();\n\n    function getHostedFieldsStyles() {\n        return {\n            input: {\n                'font-size': '12px',\n                color: '#b7802a'\n            },\n            ':focus': {\n                color: 'blue'\n            },\n            '.valid': {\n                color: 'green'\n            },\n            '.invalid': {\n                color: 'red'\n            }\n        };\n    }\n\n    function getHostedFieldsConfig() {\n        return {\n            number: {\n                selector: '#braintreeCardNumber'\n            },\n            cvv: {\n                selector: '#braintreeCvv'\n            },\n            expirationDate: {\n                selector: '#braintreeExpirationDate'\n            }\n        };\n    }\n\n    if (!params.hostedFieldsStyles) {\n        params.hostedFieldsStyles = getHostedFieldsStyles();\n    }\n\n    params.hostedFieldsConfig = getHostedFieldsConfig();\n\n    $.extend(params.hostedFieldsConfig, params.hostedFieldsAdvancedOptions);\n\n    createHostedFields();\n}\n\nmodule.exports = {\n    init,\n    initFields,\n    startTokenize,\n    isFormValid,\n    getHostedFieldInstance: function () {\n        return params ? params.hostedFieldsInstance : null;\n    },\n    updateData: function (data) {\n        params.data = data;\n    }\n};\n","/* eslint-disable no-inner-declarations */\n'use strict';\n\n/* global braintreeUtils braintree paypal $ */\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\nvar paypalHelper = require('./paypal/paypalHelper');\n\nvar bu = braintreeUtils;\nvar console = bu.console;\n\nvar pid;\nvar uuid;\nvar removeFromCartUrl;\nvar loader;\nvar $braintreePDPButton = document.querySelector('.braintree_pdp_button');\nvar $miniCartQuantity = document.querySelector('.minicart-quantity');\nvar $addToCartButton = document.querySelector('.add-to-cart');\n\nfunction Constructor(initParams, $btn) {\n    var params = initParams;\n    this.params = initParams;\n    params.options = params.options || {};\n\n    this.$btn = $btn;\n    var $errorContainer = document.createElement('div');\n    $errorContainer.className = 'error';\n\n    if (params.$errorContainer) {\n        $errorContainer = params.$errorContainer;\n        delete params.$errorContainer;\n    }\n\n    var $loaderContainter = document.querySelector('.braintreePayPalLoader');\n    var $braintreePaypalRiskDataInput = document.querySelector('input[name=braintreePaypalRiskData]');\n\n    if (params.$loaderContainer) {\n        $loaderContainter = params.$loaderContainer;\n    }\n\n    $btn.parentNode.insertBefore($errorContainer, $btn.nextSibling);\n\n    this.er = bu.createErrorInstance($errorContainer);\n    loader = loaderInstance($loaderContainter);\n    this.loader = loader;\n    var that = this;\n\n    if (params.isFraudToolsEnabled) {\n        loader.show();\n        braintree.dataCollector.create({\n            authorization: bu.clientToken,\n            paypal: true,\n            kount: false\n        }, function (error, data) {\n            loader.hide();\n            if (error) {\n                console.log(error);\n                return;\n            }\n            if ($braintreePaypalRiskDataInput) {\n                $braintreePaypalRiskDataInput.value = data.deviceData;\n            }\n            params.riskData = data.deviceData;\n        });\n    }\n\n    // Check minicart quantity and hide PDPbutton if it is not empty\n    if ($miniCartQuantity && parseInt($miniCartQuantity.textContent, 0) > 0 && $braintreePDPButton) {\n        $braintreePDPButton.style.display = 'none';\n    }\n\n    loader.show();\n\n    braintree.client.create({\n        authorization: bu.clientToken\n    }, function (error, clientInstance) {\n        if (error) {\n            that.er.show(error);\n            return;\n        }\n\n        braintree.paypalCheckout.create({\n            authorization: bu.clientToken\n        }, function (err, paypalCheckoutInstance) {\n            if (err) {\n                that.er.show(err);\n                return;\n            }\n            if ($braintreePDPButton) {\n                function hidePDPButton() {\n                    $braintreePDPButton.style.display = 'none';\n                }\n                function showPDPButton() {\n                    $braintreePDPButton.style.display = '';\n                }\n\n                if ($addToCartButton.disabled) {\n                    hidePDPButton();\n                }\n                $('body').on('cart:update', function () {\n                    $miniCartQuantity = parseInt(document.querySelector('.minicart-quantity').textContent, 0);\n                    if ($addToCartButton.disabled) {\n                        hidePDPButton();\n                    }\n                    if ($miniCartQuantity === 0 && !$addToCartButton.disabled) {\n                        showPDPButton();\n                    }\n                });\n\n                $('body').on('product:afterAddToCart', function () {\n                    hidePDPButton();\n                });\n\n                // Update addToCart button status\n                $('body').on('product:updateAddToCart', function () {\n                    $miniCartQuantity = parseInt(document.querySelector('.minicart-quantity').textContent, 0);\n                    if ($miniCartQuantity === 0) {\n                        if ($addToCartButton.disabled) {\n                            hidePDPButton();\n                        }\n                        if (!$addToCartButton.disabled) {\n                            showPDPButton();\n                        }\n                    }\n                });\n            }\n\n            var paypalButtonConfig = {\n                env: clientInstance.getConfiguration().gatewayConfiguration.environment === 'production' ? 'production' : 'sandbox',\n                payment: function () {\n                    // https://braintree.github.io/braintree-web/current/PayPalCheckout.html#createPayment\n                    if ($braintreePDPButton && $braintreePDPButton.style.display === '') {\n                        that.er.hide();\n                        paypal.Button.props.payment.timeout = 30000;\n                        var res = braintreeUtils.pdpOnlickForAsignedPaypalPayment(paypalCheckoutInstance);\n                        if (res.cart) {\n                            uuid = res.pliUUID;\n                            removeFromCartUrl = res.cart.actionUrls.removeProductLineItemUrl;\n                            pid = res.pid;\n                            that.params.options.amount = parseFloat(res.cart.totals.grandTotal.replace(/\\$|,/g, ''));\n                        } else {\n                            throw new Error(res.message || 'Error occurs');\n                        }\n                    }\n\n                    return paypalCheckoutInstance.createPayment(that.params.options);\n                },\n                locale: params.options.locale,\n                commit: false,\n                style: {\n                    layout: 'vertical',  // horizontal | vertical\n                    size: 'responsive',    // medium | large | responsive\n                    shape: 'pill',      // pill | rect\n                    color: 'gold'       // gold | blue | silver | black\n                    // label: 'checkout',\n                    // checkout The PayPal Checkout button. The default button.\n                    // credit   The PayPal Credit button. Initializes the credit flow. Cannot be used with any custom color option.\n                    // pay      The Pay With PayPal button. Initializes the checkout flow.\n                    // buynow   The Buy Now button. Initializes the checkout flow. The default Buy Now button is unbranded. To include PayPal branding, set branding: true.\n                    // paypal   The generic PayPal button. Initializes the checkout flow. This button contains only the PayPal brand logo.\n                    // tagline: true, // false - to disable the tagline/text beneath the button\n                    // maxbuttons: 4, //1-4\n                    // fundingicons: true, // true  Displays funding instrument icons. Not valid for the credit button.\n                    // false Hides funding instrument icons.\n                },\n                funding: {\n                    allowed: [paypal.FUNDING.CARD, paypal.FUNDING.CREDIT, paypal.FUNDING.VENMO],\n                    disallowed: []\n                    // paypal.FUNDING.CREDIT    Allow buyers to pay with PayPal Credit.                 Enabled by default for US buyers.\n                    // paypal.FUNDING.CARD      Allow buyers to pay with their credit or debit card     Enabled by default for all buyers.\n                    // paypal.FUNDING.ELV       Allow German buyers to pay with their bank account      Enabled by default for DE buyers.\n                },\n                onAuthorize: function (data, actions) {\n                    return new paypal.Promise(function (resolve, reject) {\n                        paypalCheckoutInstance.tokenizePayment(data).then(function (payload) {\n                            params.onTokenizePayment(payload, resolve, reject, actions, that);\n                        }).catch(function (err) {\n                            loader.hide();\n                            if (err) {\n                                that.er.show(err);\n                                return;\n                            }\n                        });\n                    });\n                },\n                onCancel: function (a, b) {\n                    if (typeof params.options.onCancel === 'function') {\n                        params.options.onCancel(a, b);\n                    }\n                    if ($braintreePDPButton && $braintreePDPButton.style.display === '') {\n                        var urlParams = {\n                            pid: pid,\n                            uuid: uuid\n                        };\n\n                        $.ajax({\n                            url: paypalHelper.appendToUrl(removeFromCartUrl, urlParams),\n                            type: 'get',\n                            dataType: 'json',\n                            success: function () {\n                                $.spinner().stop();\n                            },\n                            error: function () {\n                                $.spinner().stop();\n                            }\n                        });\n                    }\n                },\n                onError: function (err) {\n                    that.er.show(err.message.split(/\\r?\\n/g)[0]);\n\n                    if ($braintreePDPButton && $braintreePDPButton.style.display === '' && pid) {\n                        var productID = pid;\n                        var urlParams = {\n                            pid: productID,\n                            uuid: uuid\n                        };\n\n                        $.ajax({\n                            url: paypalHelper.appendToUrl(removeFromCartUrl, urlParams),\n                            type: 'get',\n                            dataType: 'json',\n                            success: function () {\n                                $.spinner().stop();\n                            },\n                            error: function () {\n                                $.spinner().stop();\n                            }\n                        });\n                    }\n                }\n            };\n\n            paypalButtonConfig = $.extend(false, paypalButtonConfig, that.params.paypalConfig);\n\n            if (that.params.paypalConfig.bmConfigurationInvalid) {\n                console.error('Invalid configuration in BM: Merchant Tools > Site Preferences > Custom Preference > BRAINTREE_PAYPAL > Field: ' + that.params.paypalConfig.bmConfigurationInvalid);\n                return;\n            }\n            paypal.Button.render(paypalButtonConfig, that.$btn).then(function () {\n                loader.hide();\n            });\n        });\n    });\n}\n\nConstructor.prototype.updateAmount = function (amount) {\n    this.params.options.amount = amount;\n};\n\nConstructor.prototype.updateShippingAddress = function (data) {\n    this.params.options.shippingAddressOverride = data;\n};\n\nmodule.exports = {\n    init: function (params, $btn) {\n        bu.clientToken = params.clientToken;\n        $.extend(bu.messages, params.messages);\n        return new Constructor(params, $btn);\n    }\n};\n","'use strict';\nvar braintreeUtils = require('../braintreeUtils');\nvar bu = braintreeUtils;\n\nvar $creditCardList = document.querySelector('#braintreeCreditCardList');\nvar $creditCardMakeDefault = document.querySelector('#braintreeCreditCardMakeDefault');\nvar $saveCreditCard = document.querySelector('#braintreeSaveCreditCard');\nvar $cardOwner = document.querySelector('#braintreeCardOwner');\n\nfunction creditcardErrorContainer(errorIns, errorData) {\n    var error = errorData;\n    if (error.details && error.details.invalidFieldKeys) {\n        for (var i = 0; i < error.details.invalidFieldKeys.length; i++) {\n            var key = error.details.invalidFieldKeys[i];\n            if (key === 'number') {\n                document.querySelector('#braintreeCardNumber').classList.add('braintree-hosted-fields-invalid');\n            }\n            if (key === 'cvv') {\n                document.querySelector('#braintreeCvv').classList.add('braintree-hosted-fields-invalid');\n            }\n            if (key === 'expirationDate') {\n                document.querySelector('#braintreeExpirationDate').classList.add('braintree-hosted-fields-invalid');\n            }\n        }\n    }\n    if (error.code === 'HOSTED_FIELDS_FIELDS_EMPTY') {\n        document.querySelector('#braintreeCardNumber, #braintreeCvv, #braintreeExpirationDate').classList.add('braintree-hosted-fields-invalid');\n    }\n}\n\nfunction convertCardTypeToDwFormat(braintreeType) {\n    switch (braintreeType) {\n        case 'American Express':\n            return 'Amex';\n        case 'MasterCard':\n            return 'Master';\n        default:\n            return braintreeType;\n    }\n}\n\nfunction cardOwnerUpdateClasses() {\n    var value = $cardOwner.value;\n    if (value.length <= parseInt($cardOwner.getAttribute('maxlength'), 10) && value.length !== 0) {\n        $cardOwner.parentNode.classList.add('braintree-hosted-fields-valid');\n    } else {\n        $cardOwner.parentNode.classList.remove('braintree-hosted-fields-valid');\n        $cardOwner.parentNode.classList.remove('braintree-hosted-fields-invalid');\n    }\n}\n\nfunction cardListChange() {\n    var $cardOwnerPh = document.querySelector('#braintreeCardOwnerPh');\n    var $cardNumbeber = document.querySelector('#braintreeCardNumber');\n    var $cardNumbeberPh = document.querySelector('#braintreeCardNumberPh');\n    var $cardCvv = document.querySelector('#braintreeCvv');\n    var $cardCvvPh = document.querySelector('#braintreeCvvPh');\n    var $cardExpiration = document.querySelector('#braintreeExpirationDate');\n    var $cardExpirationPh = document.querySelector('#braintreeExpirationPh');\n    var $braintreeSaveCardContainer = document.querySelector('#braintreeSaveCardContainer');\n    var $creditCardFieldsContainer = document.querySelector('#braintreeCreditCardFieldsContainer');\n    var $braintree3DSecureContainer = document.querySelector('#braintree3DSecureContainer');\n    var $saveCardAndDefaultContainer = document.querySelector('#braintreeSaveCardAndDefaultContainer');\n    var changeCardOwnerInput;\n    if ($cardOwner) {\n        if (typeof (Event) === 'function') {\n            changeCardOwnerInput = new Event('changeCardOwnerInput');\n            $cardOwner.addEventListener('changeCardOwnerInput', function () {\n                'change';\n            }, false);\n        } else {\n            changeCardOwnerInput = document.createEvent('Event');\n            changeCardOwnerInput.initEvent('changeCardOwnerInput', true, true);\n        }\n    }\n\n    if ($creditCardFieldsContainer) {\n        $creditCardFieldsContainer.style.display = '';\n    }\n    if ($braintree3DSecureContainer) {\n        $braintree3DSecureContainer.style.display = 'none';\n    }\n\n    document.querySelector('#braintreeCreditCardErrorContainer').textContent = '';\n\n    if (!$creditCardList || $creditCardList.value === 'newcard') {\n        if ($saveCardAndDefaultContainer) {\n            $saveCardAndDefaultContainer.style.display = '';\n        }\n        $cardNumbeberPh.style.display = 'none';\n        $cardExpirationPh.style.display = 'none';\n        $cardCvvPh.style.display = 'none';\n        $cardOwnerPh.style.display = 'none';\n        $cardOwner.value = $cardOwner.getAttribute('data-new-cart-value');\n        $cardOwner.dispatchEvent(changeCardOwnerInput);\n        $cardOwner.style.display = '';\n        $cardOwner.parentNode.classList.remove('braintree-hosted-fields-invalid');\n        $cardNumbeber.parentNode.classList.remove('braintree-hosted-fields-invalid');\n        $cardCvv.parentNode.classList.remove('braintree-hosted-fields-invalid');\n        $cardExpiration.parentNode.classList.remove('braintree-hosted-fields-invalid');\n        $cardOwner.disabled = false;\n        $cardCvv.style.display = '';\n        $cardNumbeber.style.display = '';\n        $cardExpiration.style.display = '';\n        if ($braintreeSaveCardContainer) {\n            $braintreeSaveCardContainer.style.display = '';\n            $saveCreditCard.checked = true;\n            $saveCreditCard.disabled = false;\n        }\n        if ($creditCardMakeDefault) {\n            $creditCardMakeDefault.disabled = false;\n        }\n        cardOwnerUpdateClasses();\n    } else {\n        var selectedCard = bu.getSelectedData($creditCardList);\n        $cardNumbeberPh.innerHTML = selectedCard['data-number'].value;\n        $cardCvvPh.innerHTML = '***';\n        $cardExpirationPh.innerHTML = selectedCard['data-expiration'].value;\n        $cardOwnerPh.innerHTML = selectedCard['data-owner'].value;\n        $cardOwner.value = selectedCard['data-owner'].value;\n        $cardOwner.dispatchEvent(changeCardOwnerInput);\n        document.querySelector('#braintreeCardType').value = selectedCard['data-type'].value;\n        document.querySelector('#braintreeCardMaskNumber').value = selectedCard['data-number'].value;\n        $cardNumbeberPh.style.display = '';\n        $cardExpirationPh.style.display = '';\n        $cardCvvPh.style.display = '';\n        $cardOwnerPh.style.display = '';\n        $cardOwner.style.display = 'none';\n        if ($creditCardMakeDefault) {\n            if (selectedCard['data-default'].value === 'true') {\n                $creditCardMakeDefault.disabled = true;\n            } else {\n                $creditCardMakeDefault.disabled = false;\n            }\n            $creditCardMakeDefault.checked = true;\n        }\n        $cardOwner.disabled = true;\n        $cardCvv.style.display = 'none';\n        $cardNumbeber.style.display = 'none';\n        $cardExpiration.style.display = 'none';\n        if ($braintreeSaveCardContainer) {\n            $saveCreditCard.checked = false;\n            $braintreeSaveCardContainer.style.display = 'none';\n        }\n    }\n}\n\nfunction makeCardDefault() {\n    if ($saveCreditCard.checked) {\n        $creditCardMakeDefault.disabled = false;\n        $creditCardMakeDefault.checked = true;\n    } else {\n        $creditCardMakeDefault.disabled = true;\n        $creditCardMakeDefault.checked = false;\n    }\n}\n\nfunction initCardListAndSaveFunctionality() {\n    if ($saveCreditCard) {\n        $saveCreditCard.addEventListener('change', function () {\n            makeCardDefault();\n        });\n    }\n\n    if ($creditCardList) {\n        $creditCardList.addEventListener('change', function () {\n            cardListChange();\n        });\n    }\n    cardListChange();\n}\n\nfunction cardOwnerEvents() {\n    $cardOwner.addEventListener('focus', function () {\n        $cardOwner.parentNode.classList.add('braintree-hosted-fields-focused');\n    });\n    $cardOwner.addEventListener('blur', function () {\n        $cardOwner.parentNode.classList.remove('braintree-hosted-fields-focused');\n    });\n    $cardOwner.addEventListener('keyup', function () {\n        document.querySelector('#braintreeCardOwner').setAttribute('data-new-cart-value', $cardOwner.value);\n        cardOwnerUpdateClasses();\n    });\n    $cardOwner.addEventListener('change', function () {\n        cardOwnerUpdateClasses();\n    });\n}\n\nmodule.exports = {\n    creditcardErrorContainer,\n    convertCardTypeToDwFormat,\n    cardOwnerEvents,\n    initCardListAndSaveFunctionality\n};\n","'use strict';\nvar creditCard = require('../braintreeCreditCard');\n\nvar $continueButton = document.querySelector('button.submit-payment');\n\n/**\n * Gets required Additional shipping info for 3ds\n *\n * @param {Object} orderAddress - User's shipping address\n * @returns {Object} an object with required fields\n */\n\nfunction getShippingAdditionalInfo(orderAddress) {\n    return {\n        workPhoneNumber: orderAddress.phone,\n        shippingGivenName: orderAddress.recipientName.split(' ').slice(0, -1).join(' '),\n        shippingSurname: orderAddress.recipientName.split(' ').slice(-1).join(' '),\n        shippingPhone: orderAddress.phone,\n        shippingAddress: {\n            streetAddress: orderAddress.line1,\n            extendedAddress: orderAddress.line2,\n            locality: orderAddress.city,\n            region: orderAddress.state,\n            postalCode: orderAddress.postalCode,\n            countryCodeAlpha2: orderAddress.countryCode\n        }\n    };\n}\n\nfunction updateData() {\n    $.ajax({\n        url: document.querySelector('.js_braintree_getOrderInfoUrl').value,\n        type: 'get',\n        dataType: 'json',\n        success: function (data) {\n            data.shippingAdditionalInfo = data.shippingAddress ? getShippingAdditionalInfo(data.shippingAddress) : null;\n            creditCard.updateData(data);\n        },\n        error: function () {\n            window.location.reload();\n        }\n    });\n}\n\nfunction initCreditCardFields() {\n    document.querySelectorAll('.js_braintree_creditCardFields').forEach(function (el) {\n        var $container = el;\n        if (JSON.parse($container.getAttribute('data-is-inited'))) {\n            return;\n        }\n        var config = JSON.parse($container.getAttribute('data-braintree-config'));\n        if (typeof config !== 'object' || config === null) {\n            console.error(el, '.js_braintree_creditCardFields has not valid data-braintree-config');\n            return;\n        }\n        config.continueButton = $continueButton;\n        creditCard.initFields(config, $container);\n        $container.setAttribute('data-is-inited', true);\n    });\n}\n\nmodule.exports = {\n    initCreditCardFields,\n    getShippingAdditionalInfo,\n    updateData\n};\n","/* eslint-disable no-use-before-define */\n'use strict';\n\n/* global braintreeUtils braintree $ VenmoSession */\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\n\nvar bu = braintreeUtils;\n\nfunction Constructor(initParams, $btn) {\n    var $errorContainer = document.createElement('div');\n    $errorContainer.className = 'venmo-error';\n    var $loaderContainter = document.createElement('div');\n    $loaderContainter.className = 'braintree-loader';\n    this.$braintreeVenmoRiskDataInput = document.querySelector('input[name=braintreeVenmoRiskData]');\n\n    this.$btn = $btn;\n    this.params = initParams;\n\n    if (initParams.$errorContainer) {\n        $errorContainer = initParams.$errorContainer;\n        delete initParams.$errorContainer;\n    }\n\n    if (initParams.$loaderContainer) {\n        $loaderContainter = initParams.$loaderContainer;\n    }\n\n    $btn.parentNode.insertBefore($errorContainer, $btn.nextSibling);\n\n    this.er = bu.createErrorInstance($errorContainer);\n    this.loader = loaderInstance($loaderContainter);\n}\n\nConstructor.prototype.createVenmo = function () {\n    var that = this;\n    that.loader.show();\n\n    braintree.client.create({\n        authorization: bu.clientToken\n    }, function (clientErr, clientInstance) {\n            // Stop if there was a problem creating the client.\n            // This could happen if there is a network error or if the authorization\n            // is invalid.\n        if (clientErr) {\n            that.er.show(clientErr);\n            return;\n        }\n\n        braintree.dataCollector.create({\n            client: clientInstance,\n            paypal: true\n        }, function (dataCollectorErr, dataCollectorInstance) {\n            if (dataCollectorErr) {\n                that.er.show(dataCollectorErr);\n                return;\n            }\n\n            if (that.$braintreeVenmoRiskDataInput) {\n                that.$braintreeVenmoRiskDataInput.value = dataCollectorInstance.deviceData;\n            }\n            that.loader.hide();\n        });\n\n        braintree.venmo.create({\n            client: clientInstance,\n            allowNewBrowserTab: false,\n            ignoreHistoryChanges: true\n        }, function (venmoErr, venmoInstance) {\n            if (venmoErr) {\n                that.er.show(venmoErr);\n                return;\n            }\n\n                // Verify browser support before proceeding.\n            if (!venmoInstance.isBrowserSupported()) {\n                that.params.deviceNotSupportVenmo();\n                that.loader.hide();\n                return;\n            }\n\n            that.$btn.addEventListener('click', function () {\n                if (!that.params.venmoAccountPage && !that.params.onClick()) {\n                    return;\n                }\n                venmoInstance.tokenize({ processResultsDelay: 10 }, function (tokenizeErr, payload) {\n                    that.loader.show();\n\n                    if (tokenizeErr) {\n                        handleVenmoError(tokenizeErr);\n                    } else {\n                        handleVenmoSuccess(payload);\n                    }\n                });\n                return;\n            });\n        });\n    });\n\n    function handleVenmoError(err) {\n        that.er.show(err);\n        that.loader.hide();\n    }\n    function handleVenmoSuccess(payload) {\n        that.params.onTokenizePayment(payload);\n        that.loader.hide();\n    }\n};\n\nmodule.exports = {\n    init: function (params, $btn) {\n        var ins = new Constructor(params, $btn);\n        bu.clientToken = params.clientToken;\n        return ins.createVenmo();\n    }\n};\n","require('./braintree/braintreeMFRA')();\n","'use strict';\n\nmodule.exports = function () {\n    /* global braintreeUtils braintree $ */\n    var helper = require('./helper');\n    var applepayHelper = require('./applepay/applepayHelper');\n    var creditcardHelper = require('./creditcard/creditcardHelper');\n    var creditcardPayment = require('./creditcard/creditcardPayment');\n    var creditCardFields = require('./creditcard/creditcardFields');\n    var creditCardAccount = require('./creditcard/creditcardAccount');\n    var minicartHelper = require('./paypal/minicartHelper');\n    var paypalAccount = require('./paypal/paypalAccount');\n    var paypalPayment = require('./paypal/paypalPayment');\n\n    var $form = document.querySelector('#dwfrm_billing'); // eslint-disable-line no-unused-vars\n    var $cartPage = document.querySelectorAll('.cart-page');\n    var $continueButton = document.querySelector('button.submit-payment');\n    var $summaryDetails = document.querySelector('.summary-details .payment-details');\n    var $addCreditCardForm = document.querySelector('.js_braintree_addCreditCardForm');\n    var $addPaypalAccountForm = document.querySelector('.js_braintree_addPaypalAccountForm');\n    var $paypalContent = document.querySelector('.js_braintree_paypalContent');\n    var $creditCardContent = document.querySelector('.js_braintree_creditCardContent');\n    var $applepayContent = document.querySelector('.js_braintree_applepayContent');\n    var $braintreePaypalNonce = document.querySelector('#braintreePaypalNonce');\n    var $minicartPopover = document.querySelector('.minicart .popover');\n    var $creditCardList = document.querySelector('#braintreeCreditCardList');\n\n    var venmoAccount = require('./venmo/venmoAccount');\n    var venmoPayment = require('./venmo/venmoPayment');\n    var $addVenmoAccountForm = document.querySelector('.js_braintree_addVenmoAccountForm');\n    var $venmoContent = document.querySelector('.js_braintree_venmoContent');\n\n    if (window.NodeList && !NodeList.prototype.forEach) {\n        NodeList.prototype.forEach = Array.prototype.forEach;\n    }\n\n    (function () {\n        if (typeof window.CustomEvent === 'function') return false; // If not IE\n\n        function CustomEvent(event, params) {\n            // eslint-disable-next-line no-param-reassign\n            params = params || { bubbles: false, cancelable: false, detail: undefined };\n            var evt = document.createEvent('CustomEvent');\n            evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n            return evt;\n        }\n\n        CustomEvent.prototype = window.Event.prototype;\n\n        window.CustomEvent = CustomEvent;\n    }());\n\n    if ($cartPage) {\n        helper.initWathcherCartUpdate();\n    }\n\n    if ($addCreditCardForm) {\n        creditCardAccount.initAccountAddCreditCard();\n    }\n\n    if ($addPaypalAccountForm) {\n        paypalAccount.initAddPaypalAccount();\n    }\n\n    if ($addVenmoAccountForm) {\n        venmoAccount.initAddVenmoAccount();\n    }\n\n    document.addEventListener('DOMContentLoaded', function () {\n        minicartHelper.miniCartButton();\n        minicartHelper.changeUrlForMiniCartBtn();\n    });\n\n    if ($minicartPopover) {\n        minicartHelper.observer.observe($minicartPopover, { childList: true });\n    }\n\n    helper.paymentMethodChangeHandle(document.querySelector('.payment-options[role=tablist] a.active[data-toggle=\"tab\"]'));\n\n    applepayHelper.initApplepayButton();\n\n    if ($paypalContent) {\n        paypalPayment.makePaypalPayment($continueButton);\n    }\n\n    if ($creditCardContent) {\n        creditCardFields.initCreditCardFields();\n        creditcardHelper.initCardListAndSaveFunctionality();\n\n        $('body').on('checkout:updateCheckoutView', creditCardFields.updateData);\n\n        creditCardFields.updateData();\n\n        if ($creditCardList) {\n            $creditCardList.addEventListener('change', function () {\n                creditcardPayment.doNotAllowSubmitForm();\n            });\n        }\n        $('body').on('braintree:3dSecure_content_shown', function () {\n            helper.continueButtonToggle(false);\n        });\n\n        $('body').on('braintree:3dSecure_content_removed', function () {\n            setTimeout(function () {\n                creditcardPayment.hide3DSecureContainer();\n            }, 2000);\n        });\n\n        $continueButton.addEventListener('click', function (event) {\n            if (!event.isTrusted) {\n                return;\n            }\n            creditcardPayment.makeCreditCardPayment(event);\n        });\n    }\n\n    if ($applepayContent) {\n        applepayHelper.applepayPayment($continueButton);\n    }\n\n    if ($venmoContent) {\n        venmoPayment.makeVenmoPayment($continueButton);\n    }\n\n    $('.payment-options[role=tablist] a[data-toggle=\"tab\"]').on('shown.bs.tab', function (e) {\n        helper.paymentMethodChangeHandle(e.target);\n        const cardList = document.getElementById('braintreeCreditCardList');\n        const paypalList = document.getElementById('braintreePaypalAccountsList');\n        var changeEvent;\n\n        if (e.target.hash === '#creditcard-content' && cardList) {\n            if (typeof (Event) === 'function') {\n                changeEvent = new Event('changeEvent');\n                cardList.addEventListener('changeEvent', function () {\n                    'change';\n                }, false);\n            } else {\n                changeEvent = document.createEvent('Event');\n                changeEvent.initEvent('changeEvent', true, true);\n            }\n            cardList.dispatchEvent(changeEvent);\n        } else if (e.target.hash === '#paypal-content' && paypalList) {\n            if (typeof (Event) === 'function') {\n                changeEvent = new Event('changeEvent');\n                paypalList.addEventListener('changeEvent', function () {\n                    'change';\n                }, false);\n            } else {\n                changeEvent = document.createEvent('Event');\n                changeEvent.initEvent('changeEvent', true, true);\n            }\n            paypalList.dispatchEvent(changeEvent);\n        }\n    });\n\n    if ($summaryDetails) {\n        $summaryDetails.classList.add('braintree-payment-details');\n        $summaryDetails.classList.remove('payment-details');\n    }\n\n    $('body').on('checkout:updateCheckoutView', helper.updateCheckoutView);\n\n    if ($braintreePaypalNonce && $braintreePaypalNonce.value !== '') {\n        document.querySelector('.paypal-tab').click();\n    }\n};\n","'use strict';\nvar braintreeUtils = require('../braintreeUtils');\nvar applePay = require('../braintreeApplepay');\n\nvar $applePayButton = document.querySelector('.js_braintree_applepay_button');\nvar $applepayButtonsWrap = document.querySelector('.js_braintree_applepayButtonsWrap');\nvar $applepayDataMethod = document.querySelector('.payment-options[role=tablist] .nav-item[data-method-id=\"ApplePay\"]');\n\nfunction makeApplePayButtonDisabled() {\n    $applePayButton.classList.add('js_braintree_applepay_button_disabled');\n}\n\nfunction hideApplePayButton() {\n    $applepayButtonsWrap.style.display = 'none'; // Remove the ApplePay select payment method radiobutton\n    if ($applepayDataMethod) {\n        $applepayDataMethod.style.display = 'none';\n    }\n}\n\nfunction showApplePayButton() {\n    $applepayButtonsWrap.style.display = 'block'; // Show the ApplePay select payment method radiobutton\n    if ($applepayDataMethod) {\n        $applepayDataMethod.style.display = 'block';\n    }\n}\n\nfunction initApplepayButton() {\n    document.querySelectorAll('.js_braintree_applepay_button').forEach(function (el) {\n        var $btn = el;\n        if (JSON.parse($btn.getAttribute('data-is-inited'))) {\n            return;\n        }\n        var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n        if (typeof config !== 'object' || config === null) {\n            console.error(el, 'not valid data-braintree-config');\n            return;\n        }\n\n        $btn.addEventListener('braintree:deviceNotSupportApplePay', function () {\n            hideApplePayButton();\n        }, false);\n        $btn.addEventListener('braintree:deviceSupportApplePay', function () {\n            showApplePayButton();\n        }, false);\n        $btn.addEventListener('braintree:ApplePayCanNotMakePaymentWithActiveCard', function () {\n            makeApplePayButtonDisabled();\n        }, false);\n\n        config.isRequiredBillingContactFields = true;\n        config.isRequiredShippingContactFields = true;\n        var applePayIns = applePay.init(config, $btn);\n\n        $btn.addEventListener('click', function () {\n            applePayIns.startPayment();\n        });\n\n        function updateCartApplepayAmount() {\n            if (!applePayIns) {\n                return;\n            }\n            applePayIns.loader.show();\n            $.ajax({\n                url: config.getOrderInfoUrl,\n                type: 'get',\n                dataType: 'json',\n                success: function (data) {\n                    applePayIns.loader.hide();\n                    applePayIns.updateAmount(data.amount);\n                },\n                error: function () {\n                    window.location.reload();\n                }\n            });\n            return;\n        }\n        $('body').on('braintree:updateCartTotals', updateCartApplepayAmount);\n\n        $btn.addEventListener('braintree:ApplePayPaymentAuthorized', function (e) {\n            var postData = {\n                braintreeApplePayBillingAddress: JSON.stringify(e.detail.data.billingAddress),\n                braintreeApplePayShippingAddress: JSON.stringify(e.detail.data.shippingAddress),\n                braintreeApplePayNonce: e.detail.data.nonce\n            };\n            if (config.customFields) {\n                postData.braintreeApplePayCustomFields = JSON.stringify(config.customFields);\n            }\n            applePayIns.loader.show();\n            braintreeUtils.postData(config.returnUrl, postData);\n        }, false);\n\n        $btn.setAttribute('data-is-inited', true);\n    });\n}\n\nfunction applepayPayment(continueButton) {\n    var config = JSON.parse($applePayButton.getAttribute('data-braintree-config'));\n    if (typeof config !== 'object' || config === null) {\n        console.error($applePayButton, 'not valid data-braintree-config');\n    }\n    var applepayButton = $('.js_braintree_applepay_button');\n    applepayButton.on('braintree:deviceNotSupportApplePay', function () {\n        hideApplePayButton();\n    });\n    applepayButton.on('braintree:deviceSupportApplePay', function () {\n        showApplePayButton();\n    });\n    applepayButton.on('braintree:ApplePayCanNotMakePaymentWithActiveCard', function () {\n        makeApplePayButtonDisabled();\n    });\n\n    var applePayIns = applePay.init(config, $applePayButton);\n\n    function authorizedApplePayPayment(e, data) {\n        document.querySelector(('#braintreeApplePayNonce')).value = data.nonce;\n        if (config.customFields) {\n            document.querySelector('#braintreeApplePayCustomFields').value = JSON.stringify(config.customFields);\n        }\n        continueButton.click();\n        applePayIns.loader.show();\n    }\n\n    if (!applePayIns) return;\n    $applePayButton.addEventListener('click', function () {\n        applePayIns.startPayment();\n    });\n\n    applepayButton.on('braintree:ApplePayPaymentAuthorized', authorizedApplePayPayment);\n\n    function appleUpdateAmountData() { // eslint-disable-line no-inner-declarations\n        applePayIns.loader.show();\n        $.ajax({\n            url: config.getOrderInfoUrl,\n            type: 'get',\n            dataType: 'json',\n            success: function (data) {\n                applePayIns.loader.hide();\n                applePayIns.updateAmount(data.amount);\n            },\n            error: function () {\n                window.location.reload();\n            }\n        });\n    }\n    $('body').on('checkout:updateCheckoutView', appleUpdateAmountData);\n    appleUpdateAmountData();\n}\n\nmodule.exports = {\n    initApplepayButton,\n    applepayPayment\n};\n","'use strict';\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\n/* global braintreeUtils braintree $ ApplePaySession */\n\nvar bu = braintreeUtils;\nvar loader;\n\nfunction Constructor(initParams, $btn) {\n    this.$btn = $btn;\n    var $errorContainer = document.createElement('div');\n    $errorContainer.className = 'error';\n    var $loaderContainter = document.querySelector('.braintreeApplePayLoader');\n    loader = loaderInstance($loaderContainter);\n    this.loader = loader;\n    $btn.parentNode.insertBefore($errorContainer, $btn.nextSibling);\n    this.params = initParams;\n    this.er = bu.createErrorInstance($errorContainer);\n}\n\nConstructor.prototype.createApplePay = function () {\n    var that = this;\n    var params = that.params;\n    loader.show();\n\n    braintree.applePay.create({\n        authorization: bu.clientToken\n    }, function (error, applePayInstance) {\n        loader.hide();\n        if (error) {\n            that.er.show(error);\n            return;\n        }\n        that.createApplePaySession = function () {\n            var paymentRequest = applePayInstance.createPaymentRequest({\n                total: {\n                    label: params.options.displayName,\n                    amount: params.options.amount\n                }\n            });\n            if (params.isRequiredBillingContactFields) {\n                paymentRequest.requiredBillingContactFields = ['postalAddress', 'name'];\n            }\n            if (params.isRequiredShippingContactFields) {\n                paymentRequest.requiredShippingContactFields = ['postalAddress', 'name', 'phone', 'email'];\n            }\n\n            var session = new ApplePaySession(1, paymentRequest);\n\n            session.onvalidatemerchant = function (event) {\n                loader.show();\n                applePayInstance.performValidation({\n                    validationURL: event.validationURL,\n                    displayName: params.options.displayName\n                }, function (eventError, merchantSession) {\n                    loader.hide();\n                    if (eventError) {\n                        that.er.show(eventError);\n                        session.abort();\n                        return;\n                    }\n                    session.completeMerchantValidation(merchantSession);\n                });\n            };\n            session.onpaymentauthorized = function (event) {\n                loader.show();\n                applePayInstance.tokenize({\n                    token: event.payment.token\n                }, function (eventError, payload) {\n                    loader.hide();\n                    if (eventError) {\n                        that.er.show(eventError);\n                        session.completePayment(ApplePaySession.STATUS_FAILURE);\n                        return;\n                    }\n\n                    session.completePayment(ApplePaySession.STATUS_SUCCESS);\n\n                    var data = {\n                        event: event,\n                        payload: payload,\n                        nonce: payload.nonce\n                    };\n                    var shippingContact = event.payment.shippingContact;\n                    if (shippingContact) {\n                        data.shippingAddress = {\n                            streetAddress: shippingContact.addressLines[0],\n                            extendedAddress: shippingContact.addressLines[1],\n                            locality: shippingContact.locality,\n                            region: shippingContact.administrativeArea.toUpperCase(),\n                            postalCode: shippingContact.postalCode,\n                            countryCodeAlpha2: shippingContact.countryCode.toUpperCase(),\n                            firstName: shippingContact.givenName,\n                            lastName: shippingContact.familyName,\n                            phone: shippingContact.phoneNumber,\n                            email: shippingContact.emailAddress\n                        };\n                    }\n                    var billingContact = event.payment.billingContact;\n                    if (billingContact) {\n                        data.billingAddress = {\n                            streetAddress: billingContact.addressLines[0],\n                            extendedAddress: billingContact.addressLines[1],\n                            locality: billingContact.locality,\n                            region: billingContact.administrativeArea.toUpperCase(),\n                            postalCode: billingContact.postalCode,\n                            countryCodeAlpha2: billingContact.countryCode.toUpperCase(),\n                            firstName: billingContact.givenName,\n                            lastName: billingContact.familyName,\n                            email: shippingContact.emailAddress,\n                            phone: shippingContact.phoneNumber\n                        };\n                    }\n\n                    that.$btn.dispatchEvent(new CustomEvent('braintree:ApplePayPaymentAuthorized', {\n                        detail: {\n                            data: data\n                        }\n                    }));\n                });\n            };\n            session.begin();\n        };\n        var promise = ApplePaySession.canMakePaymentsWithActiveCard(applePayInstance.merchantIdentifier);\n        promise.then(function (canMakePaymentsWithActiveCard) {\n            if (!canMakePaymentsWithActiveCard) {\n                that.$btn.dispatchEvent(new CustomEvent('braintree:ApplePayCanNotMakePaymentWithActiveCard'));\n                that.createApplePaySession = null;\n                return;\n            }\n        });\n    });\n};\n\nConstructor.prototype.startPayment = function () {\n    this.er.hide();\n    if (this.createApplePaySession) {\n        this.createApplePaySession();\n    }\n};\n\nConstructor.prototype.updateAmount = function (amount) {\n    this.params.options.amount = amount;\n};\n\nmodule.exports = {\n    init: function (params, $btn) {\n        if (!window.ApplePaySession) {\n            $btn.dispatchEvent(new CustomEvent('braintree:deviceNotSupportApplePay'));\n            return false;\n        }\n        $btn.dispatchEvent(new CustomEvent('braintree:deviceSupportApplePay'));\n        var ins = new Constructor(params, $btn);\n        bu.clientToken = params.clientToken;\n        $.extend(bu.messages, params.messages);\n        ins.createApplePay();\n        return ins;\n    }\n};\n\n","'use strict';\n\nvar braintreeUtils = require('../braintreeUtils');\nvar creditCard = require('../braintreeCreditCard');\nvar helper = require('../helper');\n\nvar $continueButton = document.querySelector('button.submit-payment');\nvar $creditCardList = document.querySelector('#braintreeCreditCardList');\n\nfunction doNotAllowSubmitForm() {\n    helper.continueButtonToggle(false);\n    $continueButton.setAttribute('data-is-allow-submit-form', false);\n}\n\nfunction hide3DSecureContainer() {\n    document.querySelector('#braintreeCreditCardFieldsContainer').style.display = '';\n    document.querySelector('#braintreeSaveCardAndDefaultContainer').style.display = '';\n    document.querySelector('#braintree3DSecureContainer').style.display = 'none';\n    doNotAllowSubmitForm();\n}\n\nfunction allowSubmitForm(event) {\n    $continueButton.setAttribute('data-is-allow-submit-form', true);\n    event.target.click();\n}\n\nfunction isActiveCreditCardTab() {\n    return document\n        .querySelector('.payment-options[role=tablist] a[data-toggle=\"tab\"][href=\"#creditcard-content\"]')\n        .classList\n        .contains('active');\n}\n\nfunction isPaypalNonceExist() {\n    var hasPaypalNonce = document.querySelector('#braintreePaypalNonce');\n    var isActivePaypalTab = document.querySelector('.paypal-tab').classList.contains('active');\n    return !isActivePaypalTab && hasPaypalNonce;\n}\n\nfunction makeCreditCardPayment(event) {\n    var braintreePaypalAccount = document.getElementById('braintreePaypalAccount');\n    var customerAuthenticated = JSON.parse(braintreePaypalAccount.dataset.customerAuthenticated);\n    var $braintreePaypalAccountsList = document.querySelector('#braintreePaypalAccountsList');\n\n    // check if paypal method was used and change appearance of paypal tab\n    if (isPaypalNonceExist()) {\n        var paypalAccount = document.querySelector('.form-group.js_braintree_used_paypal_account');\n        var $paypalContent = document.querySelector('.js_braintree_paypalContent');\n        var $paypalButton = document.querySelector('.js_braintree_paypal_billing_button');\n        var $formIndent = document.querySelector('.form-indent');\n\n        paypalAccount.classList.remove('used-paypal-account');\n        paypalAccount.classList.add('used-paypal-account-hide');\n        $formIndent.classList.remove('used-paypal-account-hide');\n        $formIndent.classList.add('used-paypal-account');\n        $paypalButton.style.display = 'block';\n        $paypalContent.setAttribute('data-paypal-is-hide-continue-button', true);\n        if (customerAuthenticated) {\n            document.querySelectorAll('.js_braintree_paypalContent .custom-checkbox').forEach((el) => { el.style.display = ''; });\n            if ($braintreePaypalAccountsList && $braintreePaypalAccountsList.value !== 'newaccount') {\n                $paypalButton.style.display = 'none';\n                $paypalContent.setAttribute('data-paypal-is-hide-continue-button', false);\n                document.querySelector('#braintreeSavePaypalAccountContainer').style.display = 'none';\n            }\n        }\n    }\n    if (JSON.parse($continueButton.getAttribute('data-is-allow-submit-form')) && creditCard.isFormValid()) {\n        return;\n    }\n    if (!isActiveCreditCardTab()) {\n        var paypalAccountList = document.querySelector('#braintreePaypalAccountsList');\n        if (paypalAccountList && paypalAccountList.value !== 'newaccount') helper.continueButtonToggle(false);\n        return;\n    }\n\n    if ($creditCardList) {\n        var is3dSecureEnabled = JSON.parse(document.querySelector('.js_braintree_creditCardFields').getAttribute('data-braintree-config')).is3dSecureEnabled;\n        if ($creditCardList && $creditCardList.value !== 'newcard') {\n            if (!is3dSecureEnabled) {\n                allowSubmitForm(event);\n                return;\n            }\n\n            var selectedCard = braintreeUtils.getSelectedData($creditCardList);\n            $.post($creditCardList.getAttribute('data-get-payment-nonce-url'), { id: selectedCard['data-id'].value }, function (responce) {\n                creditCard.startTokenize(function (result) {\n                    if (!result.error) {\n                        allowSubmitForm(event);\n                    }\n                }, responce);\n            });\n            event.preventDefault();\n            event.stopPropagation();\n            return;\n        }\n    }\n    creditCard.startTokenize(function (result) {\n        if (!result.error) allowSubmitForm(event);\n    });\n    event.preventDefault();\n    event.stopPropagation();\n}\n\nmodule.exports = {\n    doNotAllowSubmitForm,\n    hide3DSecureContainer,\n    makeCreditCardPayment\n};\n","'use strict';\nvar creditCard = require('../braintreeCreditCard');\nvar creditCardFields = require('./creditcardFields');\n\nfunction submitCreditCardForm() {\n    $('.js_braintree_addCreditCardForm').submit(function () {\n        var addCreditCardForm = $(this);\n        creditCard.startTokenize(function (result) {\n            if (result.error) return;\n            addCreditCardForm.spinner().start();\n            $.ajax({\n                url: addCreditCardForm.attr('action'),\n                type: 'post',\n                dataType: 'json',\n                data: addCreditCardForm.serialize(),\n                success: function (data) {\n                    addCreditCardForm.spinner().stop();\n                    if (!data.success) {\n                        document.querySelector('#braintreeCreditCardErrorContainer').textContent = data.error;\n                    } else {\n                        location.href = data.redirectUrl;\n                    }\n                },\n                error: function (err) {\n                    if (err.responseJSON.redirectUrl) {\n                        window.location.href = err.responseJSON.redirectUrl;\n                    }\n                    addCreditCardForm.spinner().stop();\n                }\n            });\n        });\n        return false;\n    });\n}\n\nfunction initAccountAddCreditCard() {\n    creditCardFields.initCreditCardFields();\n    submitCreditCardForm();\n}\n\nmodule.exports = {\n    initAccountAddCreditCard\n};\n","'use strict';\n\nvar paypalHelper = require('./paypalHelper');\nvar payPal = require('../braintreePaypal');\nvar braintreeUtils = require('../braintreeUtils');\n\nfunction miniCartButton() {\n    document.querySelectorAll('.js_braintree_paypal_cart_button').forEach(function (el) {\n        var $btn = el;\n        if (JSON.parse($btn.getAttribute('data-is-inited'))) {\n            return;\n        }\n        var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n        if (typeof config !== 'object' || config === null) {\n            console.error(el, 'not valid data-braintree-config');\n            return;\n        }\n\n        config.paypalConfig = config.paypalConfig || {};\n\n        if (config.billingAgreementFlow) {\n            var billingAgreementFlowConfig = {\n                isShippingAddressExist: config.billingAgreementFlow.isShippingAddressExist,\n                startBillingAgreementCheckoutUrl: config.billingAgreementFlow.startBillingAgreementCheckoutUrl\n            };\n            if (!config.paypalConfig.style) {\n                config.paypalConfig.style = {\n                    layout: 'horizontal',\n                    label: 'paypal',\n                    maxbuttons: 1,\n                    fundingicons: false,\n                    shape: 'rect',\n                    size: 'responsive',\n                    tagline: false\n                };\n            }\n            config.paypalConfig.style.maxbuttons = 1;\n            config.paypalConfig.payment = function () { };\n            config.paypalConfig.onAuthorize = function () { };\n            config.paypalConfig.validate = function (actions) {\n                return actions.disable();\n            };\n            config.paypalConfig.onClick = function () {\n                if (billingAgreementFlowConfig.isShippingAddressExist) {\n                    window.location.href = billingAgreementFlowConfig.startBillingAgreementCheckoutUrl;\n                    return;\n                }\n                if (document.querySelector('.popover.popover-bottom.show')) {\n                    document.querySelector('.popover.popover-bottom.show').classList.remove('show');\n                }\n                paypalHelper.appendShippingAddressModal();\n            };\n            delete config.billingAgreementFlow;\n        }\n\n        config.onTokenizePayment = function (payload, resolve, reject, actions, btnInstance) {\n            var that = btnInstance;\n            var params = btnInstance.params;\n            var postData = {\n                braintreePaypalNonce: payload.nonce\n            };\n\n            if (params.riskData) {\n                postData.riskData = params.riskData;\n            }\n\n            if (payload.details) {\n                var details = payload.details;\n                if (!details.billingAddress) {\n                    that.er.show('Merchant PayPal account does not support the Billing Address retrieving. Contact PayPal for details on eligibility and enabling this feature.');\n                    reject();\n                    return;\n                }\n                var billingAddressData = paypalHelper.createBillingAddressData(details.billingAddress, details);\n                postData.braintreePaypalBillingAddress = billingAddressData;\n                var shippingAddressData = details.shippingAddress ? paypalHelper.createShippingAddressData(details.shippingAddress, details) : '{}';\n                postData.braintreePaypalShippingAddress = shippingAddressData;\n            }\n\n            if (params.options.flow === 'vault') {\n                postData.braintreeSavePaypalAccount = 'true';\n            }\n\n            if (params.options.offerCredit) {\n                postData.braintreeIsPaypalCredit = 'true';\n            }\n\n            if (params.customFields) {\n                postData.braintreePaypalCustomFields = JSON.stringify(params.customFields);\n            }\n\n            braintreeUtils.postData(params.paypalHandle, postData);\n        };\n\n        var paypalIns = payPal.init(config, $btn);\n\n        function updateCartPaypalAmount() { // eslint-disable-line require-jsdoc\n            paypalIns.loader.show();\n            $.ajax({\n                url: config.getOrderInfoUrl,\n                type: 'get',\n                dataType: 'json',\n                success: function (data) {\n                    paypalIns.loader.hide();\n                    paypalIns.updateAmount(data.amount);\n                },\n                error: function () {\n                    window.location.reload();\n                }\n            });\n        }\n        $('body').on('braintree:updateCartTotals', updateCartPaypalAmount);\n        $btn.setAttribute('data-is-inited', true);\n    });\n\n    var $hideModalBtn = document.querySelector('.cancel-btn');\n    var $saveAddressBtn = document.querySelector('.saveAddressBtn');\n    var $addressForm = document.querySelector('form.address-form');\n    function hideModal() {\n        $('#paypalAddShippingAddressModal').modal('hide');\n    }\n\n    $('form input, form select').on('invalid', paypalHelper.showFormErrorMsg);\n\n    if ($hideModalBtn) {\n        $hideModalBtn.addEventListener('click', hideModal);\n    }\n    if ($saveAddressBtn) {\n        $saveAddressBtn.addEventListener('click', paypalHelper.clearFormErrors);\n    }\n    if ($addressForm) {\n        $('form.address-form').submit(paypalHelper.submitAddressFrom);\n    }\n}\n\nvar observer = new MutationObserver(function (mutations) {\n    mutations.forEach(function (mutation) {\n        if (mutation.addedNodes.length < 2) {\n            return;\n        }\n        miniCartButton();\n    });\n});\n\nfunction changeUrlForMiniCartBtn() {\n    if (document.querySelector('#paypalAddShippingAddressModal')) {\n        var $minicart = document.querySelector('.minicart');\n        var oldUrl = $minicart.getAttribute('data-action-url');\n        var newUrl = '?isCartPage=true';\n        $minicart.setAttribute('data-action-url', (oldUrl + newUrl));\n    }\n}\n\nmodule.exports = {\n    miniCartButton,\n    observer,\n    changeUrlForMiniCartBtn\n};\n","'use strict';\nvar paypalHelper = require('./paypalHelper');\nvar payPal = require('../braintreePaypal');\n\nvar $braintreePaypalNonce = document.querySelector('#braintreePaypalNonce');\n\nfunction submitAddPaypalAccountForm() {\n    $('.js_braintree_addPaypalAccountForm').submit(function () {\n        var $addPaypalAccountForm = $('.js_braintree_addPaypalAccountForm');\n        var $braintreeFormErrorContainer = document.querySelector('#braintreeFormErrorContainer');\n        $addPaypalAccountForm.spinner().start();\n        $.ajax({\n            url: $addPaypalAccountForm.attr('action'),\n            type: 'post',\n            dataType: 'json',\n            data: $addPaypalAccountForm.serialize(),\n            success: function (data) {\n                $addPaypalAccountForm.spinner().stop();\n                if (!data.success) {\n                    $braintreeFormErrorContainer.textContent = data.error;\n                    if (!$braintreeFormErrorContainer.hasChildNodes()) {\n                        $braintreeFormErrorContainer.setAttribute('style', 'margin: 10px 0');\n                    }\n                } else {\n                    location.href = data.redirectUrl;\n                }\n            },\n            error: function (err) {\n                if (err.responseJSON.redirectUrl) {\n                    window.location.href = err.responseJSON.redirectUrl;\n                }\n                $addPaypalAccountForm.spinner().stop();\n            }\n        });\n        return false;\n    });\n}\n\nfunction initAddPaypalAccount() {\n    var $braintreePaypalEmail = document.querySelector('#braintreePaypalEmail');\n    var $braintreePaypalBillingAddress = document.querySelector('#braintreePaypalBillingAddress');\n    document.querySelectorAll('.js_braintree_accountPaypalButton').forEach(function (el) {\n        document.querySelector('button[name=save]').setAttribute('style', 'filter: grayscale(70%)');\n        var $btn = el;\n        if (JSON.parse($btn.getAttribute('data-is-inited'))) {\n            return;\n        }\n        var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n        if (typeof config !== 'object' || config === null) {\n            console.error(el, 'not valid data-braintree-config');\n            return;\n        }\n\n        var $errorContainer = document.querySelector('#braintreeFormErrorContainer');\n        config.$loaderContainer = document.querySelector('#braintreePayPalAccLoader');\n        config.$errorContainer = $errorContainer;\n        config.onTokenizePayment = function (data, resolve) {\n            function showAddedPayPalAccount() {\n                var $savePayPalAccountBtn = document.querySelector('.savePayPalAccountBtn');\n                document.querySelector('.js_braintree_accountPaypalButton').style.display = 'none';\n                $errorContainer.setAttribute('style', 'margin: 0');\n                document.querySelector('.paypal-account-email').textContent = data.details.email;\n                $savePayPalAccountBtn.removeAttribute('disabled');\n                $savePayPalAccountBtn.removeAttribute('style', 'filter: grayscale(70%)');\n            }\n\n            if ($braintreePaypalNonce) {\n                $braintreePaypalNonce.value = data.nonce;\n            }\n            if (data.details) {\n                var details = data.details;\n                if ($braintreePaypalEmail) {\n                    $braintreePaypalEmail.value = data.details.email;\n                }\n                if (details.billingAddress) {\n                    var billingAddressData = paypalHelper.createBillingAddressData(details.billingAddress, details);\n                    $braintreePaypalBillingAddress.value = billingAddressData;\n                }\n                if (details.email) {\n                    showAddedPayPalAccount();\n                }\n                // 19.2.1 unnecessary code - shippingAddress is not written here\n                // if (details.shippingAddress) {\n                //     var shippingAddressData = paypalHelper.createShippingAddressData(details.shippingAddress, details);\n                //     var $braintreePaypalShippingAddressInput = document.querySelector('input[name=braintreePaypalShippingAddress]');\n                //     if ($braintreePaypalShippingAddressInput) {\n                //         $braintreePaypalShippingAddressInput.value = shippingAddressData;\n                //     }\n                // }\n            }\n            $errorContainer.textContent = '';\n            resolve();\n        };\n        payPal.init(config, $btn);\n        $btn.setAttribute('data-is-inited', true);\n        submitAddPaypalAccountForm();\n    });\n}\n\nmodule.exports = {\n    initAddPaypalAccount\n};\n","'use strict';\nvar paypalHelper = require('./paypalHelper');\nvar helper = require('../helper');\nvar payPal = require('../braintreePaypal');\n\nvar $paypalContent = document.querySelector('.js_braintree_paypalContent');\nvar $paypalButton = document.querySelector('.js_braintree_paypal_billing_button');\nvar $braintreePaypalAccountsList = document.querySelector('#braintreePaypalAccountsList');\nvar $braintreePaypalBillingAddressInput = document.querySelector('input[name=braintreePaypalBillingAddress]');\nvar $braintreePaypalShippingAddressInput = document.querySelector('input[name=braintreePaypalShippingAddress]');\nvar $braintreePaypalNonceInput = document.querySelector('input[name=braintreePaypalNonce]');\nvar $braintreePaypalEmail = document.querySelector('#braintreePaypalEmail');\nvar $braintreePaypalNonce = document.querySelector('#braintreePaypalNonce');\n\nfunction makePaypalPayment(continueButton) {\n    var config = JSON.parse($paypalButton.getAttribute('data-braintree-config'));\n    if (typeof config !== 'object' || config === null) {\n        console.error($paypalButton, 'not valid data-braintree-config');\n    }\n\n    function hideShowButtons() {\n        if ($braintreePaypalAccountsList.value === 'newaccount') {\n            $paypalContent.setAttribute('data-paypal-is-hide-continue-button', true);\n            continueButton.style.display = 'none';\n            $paypalButton.style.display = '';\n        } else {\n            $paypalContent.setAttribute('data-paypal-is-hide-continue-button', false);\n            continueButton.style.display = '';\n            $paypalButton.style.display = 'none';\n        }\n    }\n\n    if ($braintreePaypalAccountsList) {\n        $braintreePaypalAccountsList.addEventListener('change', function () {\n            hideShowButtons();\n        });\n    }\n\n    paypalHelper.initAccountListAndSaveFunctionality();\n\n    config.onTokenizePayment = function (data, resolve, reject, actions, btnInstance) {\n        var params = btnInstance.params;\n\n        if ($braintreePaypalNonceInput) {\n            $braintreePaypalNonceInput.value = data.nonce;\n        }\n        $braintreePaypalNonce.value = data.nonce;\n\n        if (data.details) {\n            var details = data.details;\n            $braintreePaypalEmail.value = data.details.email;\n            document.querySelector('#braintreePaypalAccount > option').value = data.details.email;\n            helper.continueButtonToggle(false);\n\n            if (details.billingAddress && params.isOverrideBillingAddress) {\n                var billingAddressData = paypalHelper.createBillingAddressData(details.billingAddress, details);\n                if ($braintreePaypalBillingAddressInput) {\n                    $braintreePaypalBillingAddressInput.value = billingAddressData;\n                }\n            }\n            if (details.shippingAddress) {\n                var shippingAddressData = paypalHelper.createShippingAddressData(details.shippingAddress, details);\n                if ($braintreePaypalShippingAddressInput) {\n                    $braintreePaypalShippingAddressInput.value = shippingAddressData;\n                }\n            }\n            if ($braintreePaypalAccountsList && $braintreePaypalAccountsList.value === 'newaccount') {\n                $paypalContent.setAttribute('data-paypal-is-hide-continue-button', true);\n                continueButton.style.display = 'none';\n            }\n        }\n        paypalHelper.showPayPalAccount(data.details.email, data.nonce);\n        continueButton.click();\n        resolve();\n    };\n\n    config.paypalConfig = config.paypalConfig || {};\n    config.paypalConfig.validate = function (validateActions) {\n        paypalHelper.formValidationConrol(validateActions, true);\n    };\n\n    var paypalIns = payPal.init(config, $paypalButton);\n\n    var isShippedAndAddressOverride = config.isShippedAndAddressOverride;\n    if (document.querySelector('.js_braintree_used_paypal_account').classList.contains('used-paypal-account')) {\n        paypalHelper.showPayPalAccount(document.querySelector('#braintreePaypalEmail').value);\n    }\n    function updateAmountAndShippingData() { // eslint-disable-line require-jsdoc\n        paypalIns.loader.show();\n        $.ajax({\n            url: config.getOrderInfoUrl,\n            type: 'get',\n            dataType: 'json',\n            success: function (data) {\n                paypalIns.loader.hide();\n                paypalIns.updateAmount(data.amount);\n                if (isShippedAndAddressOverride) {\n                    paypalIns.updateShippingAddress(data.shippingAddress);\n                    var $paypalAddress = document.querySelector('input[name=braintreePaypalShippingAddress]');\n                    if ($paypalAddress.value !== '') {\n                        var newPayPalAddress = $.extend({}, JSON.parse($paypalAddress.value), data.shippingAddress);\n                        $paypalAddress.value = JSON.stringify(newPayPalAddress);\n                    }\n                }\n            },\n            error: function () {\n                window.location.reload();\n            }\n        });\n    }\n\n    $('body').on('checkout:updateCheckoutView', updateAmountAndShippingData);\n    updateAmountAndShippingData();\n}\n\nmodule.exports = {\n    makePaypalPayment\n};\n","'use strict';\nvar braintreeVenmo = require('../braintreeVenmo');\n\nfunction submitAddVenmoAccountForm() {\n    $('.js_braintree_addVenmoAccountForm').submit(function () {\n        var $form = $(this);\n        var $btFormErrorContainer = document.querySelector('#braintreeFormErrorContainer');\n\n        $form.spinner().start();\n        $.ajax({\n            url: $form.attr('action'),\n            type: 'post',\n            dataType: 'json',\n            data: $form.serialize(),\n            success: function (data) {\n                $form.spinner().stop();\n                if (!data.success) {\n                    $btFormErrorContainer.textContent = data.error;\n                } else {\n                    location.href = data.redirectUrl;\n                }\n            },\n            error: function (err) {\n                if (err.responseJSON.redirectUrl) {\n                    window.location.href = err.responseJSON.redirectUrl;\n                }\n                $form.spinner().stop();\n            }\n        });\n        return false;\n    });\n}\n\nfunction initAddVenmoAccount() {\n    var $btn = document.querySelector('.js_braintree_accountVenmoButton');\n    var $btFormErrorContainer = document.querySelector('#braintreeFormErrorContainer');\n    var $btVenmoLoader = document.querySelector('#braintreeVenmoLoader');\n    var $buttonSave = document.querySelector('button[name=save]');\n\n    if (JSON.parse($btn.getAttribute('data-is-inited'))) {\n        return;\n    }\n    var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n\n    if (typeof config !== 'object' || config === null) {\n        console.error($btn, 'not valid data-braintree-config');\n        return;\n    }\n\n    config.$loaderContainer = $btVenmoLoader;\n    config.$errorContainer = $btFormErrorContainer;\n    config.deviceNotSupportVenmo = function () {\n        $btFormErrorContainer.textContent = config.messages.VENMO_BROWSER_NOT_SUPPORTED;\n    };\n    config.onTokenizePayment = function (data) {\n        document.querySelector('.braintree_accountVenmoButton').setAttribute('style', 'filter: grayscale(70%)');\n        $buttonSave.removeAttribute('style');\n        $btn.setAttribute('style', 'pointer-events:none');\n\n        document.querySelector('#braintreeVenmoNonce').value = data.nonce;\n        $btFormErrorContainer.textContent = '';\n        $btFormErrorContainer.style.display = 'none';\n\n        document.querySelector('.venmoUsername').textContent = data.details.username;\n\n        $buttonSave.removeAttribute('disabled');\n        document.querySelector('input[type=checkbox]').removeAttribute('disabled');\n        $btVenmoLoader.style.display = 'none';\n    };\n\n    braintreeVenmo.init(config, $btn);\n    $buttonSave.setAttribute('style', 'filter: grayscale(70%)');\n    $btn.setAttribute('isInited', true);\n    submitAddVenmoAccountForm();\n}\n\nmodule.exports = {\n    initAddVenmoAccount\n};\n","'use strict';\nvar braintreeVenmo = require('../braintreeVenmo');\nvar venmoHelper = require('./venmoHelper');\nvar loaderInstance = require('../loaderHelper');\n\nvar $venmoButton = document.querySelector('.js_braintree_venmo_button');\nvar $btVermoAccountsList = document.querySelector('#braintreeVenmoAccountsList');\nvar $braintreeVenmoNonce = document.querySelector('#braintreeVenmoNonce');\nvar $braintreeVenmoUserId = document.querySelector('#braintreeVenmoUserId');\nvar $submitShippingBtn = document.querySelector('.button, .submit-shipping');\nvar $contactEmail = document.querySelector('.contact-info-block [name=dwfrm_billing_contactInfoFields_email]');\nvar $hideVenmoButton = document.querySelector('.braintree-venmo-pay-button');\nvar $billingForm = document.querySelector('.card-body [id=dwfrm_billing]');\nvar $venmoContent = document.querySelector('.js_braintree_venmoContent');\n\nfunction makeVenmoPayment(continueButton) {\n    var config = JSON.parse($venmoButton.getAttribute('data-braintree-config'));\n\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($venmoButton, 'not valid data-braintree-config');\n    }\n    if (JSON.parse($hideVenmoButton.getAttribute('data-is-hide-venmo-button')) && $btVermoAccountsList !== 'newaccount') {\n        $venmoButton.style.display = 'none';\n    }\n\n    venmoHelper.initAccountListAndSaveFunctionality();\n\n    if ($btVermoAccountsList) {\n        $btVermoAccountsList.addEventListener('change', function () {\n            venmoHelper.hideShowButtons();\n        });\n        venmoHelper.hideShowButtons();\n    }\n\n    config.onClick = function () {\n        if ($billingForm.checkValidity()) {\n            return true;\n        }\n        $contactEmail.classList.add('is-invalid');\n        return false;\n    };\n    config.deviceNotSupportVenmo = function () {\n        $venmoButton.parentElement.firstElementChild.style.display = 'none';\n        document.querySelector('.payment-options[role=tablist] .nav-item[data-method-id=\"Venmo\"]').style.display = 'none'; // Remove the venmo select payment method radiobutton\n    };\n    config.onTokenizePayment = function (data) {\n        var $loaderContainer = venmoHelper.createLoaderContainter(document.querySelector('.page'));\n        loaderInstance($loaderContainer).show();\n\n        $braintreeVenmoNonce.value = data.nonce;\n        $braintreeVenmoUserId.value = data.details.username;\n\n        if (window.history.state !== 'shipping') {\n            continueButton.click();\n            document.querySelector('.venmo-braintree-loader').remove();\n            return true;\n        }\n\n        // move to stage payment\n        $submitShippingBtn.click();\n        $venmoButton.setAttribute('data-is-valid-stage', true);\n        $venmoButton.setAttribute('data-user-email', $contactEmail.value);\n        document.querySelector('.venmo-braintree-loader').remove();\n    };\n\n    /**\n        *  Init Venmo app with correct URL fragment (hash) to prevent Browser from opening the URL in a new tab.\n        *  Braintree JS SDK is preserving the URL in its entirety and modifies the URL fragment (hash)\n        *  to send back the results from Venmo (e.g. nonce, error message, etc.)\n        *\n    */\n    var hashChange = new MutationObserver(function (mutations) {\n        var correlationId = document.querySelector('#braintreeVenmoDeviceData').value || null;\n        var mutation = mutations.find(function (element) {\n            return element.attributeName === 'data-checkout-stage' && element.target.dataset.checkoutStage === 'payment';\n        });\n\n        if (!mutation) {\n            return false;\n        }\n        if (!correlationId) {\n            braintreeVenmo.init(config, $venmoButton);\n            return true;\n        }\n\n        if ($braintreeVenmoNonce.value && JSON.parse($venmoButton.getAttribute('data-is-valid-stage'))) {\n            $contactEmail.value = $venmoButton.getAttribute('data-user-email') || '';\n            $venmoButton.setAttribute('data-is-valid-stage', false);\n            continueButton.click();\n\n            return true;\n        }\n        if ($venmoContent.classList.contains('active') && mutation.oldValue === 'placeOrder') {\n            venmoHelper.showVenmoAccount();\n            $venmoContent.setAttribute('data-paypal-is-hide-continue-button', false);\n            $hideVenmoButton.setAttribute('data-is-hide-venmo-button', true);\n        }\n    });\n\n    hashChange.observe(document.querySelector('#checkout-main'), { attributeOldValue: true });\n}\n\nmodule.exports = {\n    makeVenmoPayment\n};\n","'use strict';\nvar braintreeUtils = require('../braintreeUtils');\nvar helper = require('../helper');\n\nvar $accountsList = document.querySelector('#braintreeVenmoAccountsList');\nvar $saveVenmoAccountCountainerEl = document.querySelector('#braintreeSaveVenmoAccountContainer');\nvar $saveVenmoAccountEl = document.querySelector('#braintreeSaveVenmoAccount');\nvar $venmoAccounMakeDefaultEl = document.querySelector('#braintreeVenmoAccountMakeDefault');\n\nvar $venmoButton = document.querySelector('.js_braintree_venmo_button');\nvar $braintreeVenmoAccount = document.getElementById('braintreeVenmoAccount');\nvar $venmoAccount = document.querySelector('.js_braintree_used_venmo_account');\nvar $braintreeVenmoUserId = document.querySelector('#braintreeVenmoUserId');\n\nvar $venmoContent = document.querySelector('.js_braintree_venmoContent');\n\n\nfunction initAccountListAndSaveFunctionality() {\n    function accountsListChange() { // eslint-disable-line require-jsdoc\n        if ($accountsList.value === 'newaccount') {\n            if ($saveVenmoAccountCountainerEl) {\n                $saveVenmoAccountCountainerEl.style.display = '';\n                $saveVenmoAccountEl.checked = true;\n                $saveVenmoAccountEl.disabled = false;\n            }\n            if ($venmoAccounMakeDefaultEl) {\n                $venmoAccounMakeDefaultEl.disabled = false;\n            }\n        } else {\n            var selectedAccount = braintreeUtils.getSelectedData($accountsList);\n            if (selectedAccount && $venmoAccounMakeDefaultEl) {\n                if (selectedAccount['data-default'].value === 'true') {\n                    $venmoAccounMakeDefaultEl.disabled = true;\n                } else {\n                    $venmoAccounMakeDefaultEl.disabled = false;\n                }\n                $venmoAccounMakeDefaultEl.checked = true;\n            }\n            if ($saveVenmoAccountCountainerEl) {\n                $saveVenmoAccountEl.checked = false;\n                $saveVenmoAccountCountainerEl.style.display = 'none';\n            }\n        }\n    }\n\n    if ($saveVenmoAccountEl) {\n        $saveVenmoAccountEl.addEventListener('change', function () {\n            if ($saveVenmoAccountEl.checked) {\n                $venmoAccounMakeDefaultEl.disabled = false;\n                $venmoAccounMakeDefaultEl.checked = true;\n            } else {\n                $venmoAccounMakeDefaultEl.disabled = true;\n                $venmoAccounMakeDefaultEl.checked = false;\n            }\n        });\n    }\n\n    if ($accountsList) {\n        $accountsList.addEventListener('change', accountsListChange);\n        accountsListChange();\n    }\n}\n\nfunction showVenmoAccount() {\n    if (!$accountsList) {\n        $venmoAccount.classList.remove('used-venmo-account-hide');\n        $braintreeVenmoAccount.options[0].text = $braintreeVenmoUserId.value;\n    }\n\n    $venmoButton.style.display = 'none';\n    helper.continueButtonToggle(false);\n}\n\nfunction hideShowButtons() {\n    if ($accountsList.value === 'newaccount') {\n        $venmoButton.style.display = '';\n        helper.continueButtonToggle(true);\n        $venmoContent.setAttribute('data-paypal-is-hide-continue-button', true);\n    } else {\n        $venmoButton.style.display = 'none';\n        helper.continueButtonToggle(false);\n        $venmoContent.setAttribute('data-paypal-is-hide-continue-button', false);\n    }\n}\n\nfunction createLoaderContainter($target) {\n    var $loaderContainter = document.createElement('div');\n    $loaderContainter.className = 'venmo-braintree-loader';\n    helper.continueButtonToggle(true);\n\n    return $target.parentNode.insertBefore($loaderContainter, $target);\n}\n\nmodule.exports = {\n    showVenmoAccount,\n    initAccountListAndSaveFunctionality,\n    hideShowButtons,\n    createLoaderContainter\n};\n"],"sourceRoot":""}